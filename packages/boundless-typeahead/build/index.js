module.exports=function(e){function t(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t){e.exports=require("boundless-input")},function(e,t){e.exports=require("boundless-utils-object-intersection")},function(e,t){e.exports=require("boundless-utils-omit-keys")},function(e,t){e.exports=require("boundless-utils-uuid")},function(e,t){e.exports=require("classnames")},function(e,t){e.exports=require("escape-string-regexp")},function(e,t){e.exports=require("react")},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),p=n.n(o),c=n(4),u=n.n(c),l=n(5),h=n.n(l),d=n(0),f=n.n(d),y=n(1),m=n.n(y),g=n(2),v=n.n(g),x=n(3),b=n.n(x),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),P=function(e){return"function"==typeof e},k=function(e){return"string"==typeof e},I=function(){},M=function(e){function t(){var e,n,r,a;s(this,t);for(var o=arguments.length,p=Array(o),c=0;c<o;c++)p[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),S.call(r),a=n,i(r,a)}return a(t,e),E(t,[{key:"componentWillMount",value:function(){(this.props.inputProps.value||this.props.inputProps.defaultValue)&&this.computeMatches()}},{key:"componentDidMount",value:function(){this.mounted=!0,this.state.selectedEntityIndex>=0&&this.props.onEntityHighlighted(this.state.selectedEntityIndex)}},{key:"componentWillReceiveProps",value:function(e){e.entities!==this.props.entities&&this.computeMatches(e.entities),e.inputProps.value!==this.props.inputProps.value&&(this.updateInputState(e.inputProps.value),this.computeMatches())}},{key:"componentDidUpdate",value:function(e,t){this.state.entityMatchIndexes.length&&!t.entityMatchIndexes.length&&(this.refs.matches.scrollTop=0),this.state.selectedEntityIndex>=0&&this.props.entities[this.state.selectedEntityIndex]!==e.entities[t.selectedEntityIndex]&&this.props.onEntityHighlighted(this.state.selectedEntityIndex)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"handleMatchClick",value:function(e){this.setState({selectedEntityIndex:e},this.setValueWithSelectedEntity)}},{key:"selectMatch",value:function(e){var t=this.state.entityMatchIndexes,n=t.length,r=t.indexOf(this.state.selectedEntityIndex)+e;if(n){r<0?r=n-1:r>=n&&(r=0);var s=t[r],i=this.refs.matches,a=i.scrollTop+i.clientHeight,o=this.refs["match_$"+s],p=o.offsetTop,c=p+o.clientHeight;c>=a?i.scrollTop+=c-a:p<=i.scrollTop&&(i.scrollTop=p),this.setState({selectedEntityIndex:s})}}},{key:"cursorAtEndOfInput",value:function(){var e=this.getInputNode();return e.selectionStart===e.selectionEnd&&e.selectionEnd===this.getValue().length}},{key:"markFuzzyMatchSubstring",value:function(e,t){for(var n=t.text,r=n.split(new RegExp("("+h()(e)+")","ig")),s=e.toLowerCase(),i=r.length,a=-1;++a<i;)r[a].toLowerCase()===s&&(r[a]=p.a.createElement("mark",{key:a,className:"b-typeahead-match-highlight"},r[a]));return r}},{key:"markStartsWithMatchSubstring",value:function(e,t){var n=t.text,r=e.toLowerCase(),s=n.toLowerCase().indexOf(r),i=s+r.length;return[p.a.createElement("span",{key:"0"},n.slice(0,s)),p.a.createElement("mark",{key:"1",className:"b-typeahead-match-highlight"},n.slice(s,i)),p.a.createElement("span",{key:"2"},n.slice(i))]}},{key:"getMarkingFunction",value:function(){return k(this.props.algorithm)?this.props.algorithm===t.mode.STARTS_WITH?this.markStartsWithMatchSubstring:this.markFuzzyMatchSubstring:P(this.props.algorithm.marker)?this.props.algorithm.marker:(void 0===this.warnedMarker&&(this.warnedMarker=!0,console.warn("Typeahead: no `props.algorithm.marker` was provided; falling back to the default marking algorithm (FUZZY).")),this.markFuzzyMatchSubstring)}},{key:"getFuzzyMatchIndexes",value:function(e,t){var n=e.toLowerCase();return t.reduce(function(e,t,r){return t.text.toLowerCase().indexOf(n)!==-1?e.push(r)&&e:e},[])}},{key:"getStartsWithMatchIndexes",value:function(e,t){var n=e.toLowerCase();return t.reduce(function(e,t,r){return 0===t.text.toLowerCase().indexOf(n)&&e.push(r),e},[])}},{key:"getMatchingFunction",value:function(){return k(this.props.algorithm)?this.props.algorithm===t.mode.STARTS_WITH?this.getStartsWithMatchIndexes:this.getFuzzyMatchIndexes:P(this.props.algorithm.matcher)?this.props.algorithm.matcher:(void 0===this.warnedMatcher&&(this.warnedMatcher=!0,console.warn("Typeahead: no `props.algorithm.matcher` was provided; falling back to the default matching algorithm (FUZZY).")),this.getFuzzyMatchIndexes)}},{key:"computeMatches",value:function(e){var t=this;this.setState(function(n,r){var s=e||r.entities,i=n.input,a=""===i?[]:t.getMatchIndexes(i,s);return{selectedEntityIndex:a.length?a[0]:-1,entityMatchIndexes:a}})}},{key:"renderNotification",value:function(){return p.a.createElement("div",{ref:"aria",id:this.state.id,className:this.props.offscreenClass,"aria-live":"polite",role:"status"},this.getSelectedEntityText())}},{key:"renderHint",value:function(){if(this.props.hint){var e=this.state.input,t=this.getSelectedEntityText(),n="";return t&&0===t.toLowerCase().indexOf(e.toLowerCase())&&(n=t.replace(new RegExp(e,"i"),e)),p.a.createElement("div",T({},this.props.hintProps,{ref:"hint",className:u()("b-input","b-input-placeholder","b-typeahead-hint",this.props.hintProps.className),tabIndex:"-1"}),n)}}},{key:"renderMatches",value:function(){var e=this;if(this.state.entityMatchIndexes.length){var t=this.props.matchWrapperProps;return p.a.createElement("div",T({},t,{ref:"matches",className:u()("b-typeahead-match-wrapper",t.className),role:"listbox"}),this.state.entityMatchIndexes.map(function(t){var n=e.props.entities[t],s=n.className,i=n.text,a=r(n,["className","text"]);return p.a.createElement("div",T({},a,{ref:"match_$"+t,className:u()("b-typeahead-match",s,{"b-typeahead-match-selected":e.state.selectedEntityIndex===t}),key:i,onClick:e.handleMatchClick.bind(e,t),role:"option"}),e.markMatchSubstring(e.state.input,n))}))}}},{key:"render",value:function(){var e=this.props,n=this.state;return p.a.createElement("div",T({},v()(e,t.internalKeys),{ref:"wrapper",className:u()("b-typeahead-wrapper",e.className),onKeyDown:this.handleKeyDown}),this.renderNotification(),this.renderHint(),p.a.createElement(f.a,T({},m()(e,f.a.defaultProps),{ref:"input","aria-controls":n.id,inputProps:T({},e.inputProps,{className:u()("b-typeahead",e.inputProps.className),onChange:this.handleChange})})),this.renderMatches())}}]),t}(p.a.PureComponent);M.mode={STARTS_WITH:b()(),FUZZY:b()()},M.propTypes=T({},f.a.propTypes,{algorithm:o.PropTypes.oneOfType([o.PropTypes.oneOf([M.mode.STARTS_WITH,M.mode.FUZZY]),o.PropTypes.shape({marker:o.PropTypes.oneOfType([o.PropTypes.func,o.PropTypes.oneOf([M.mode.STARTS_WITH,M.mode.FUZZY])]),matcher:o.PropTypes.oneOfType([o.PropTypes.func,o.PropTypes.oneOf([M.mode.STARTS_WITH,M.mode.FUZZY])])})]),clearOnSelection:o.PropTypes.bool,entities:o.PropTypes.arrayOf(o.PropTypes.shape({text:o.PropTypes.string.isRequired})),hint:o.PropTypes.bool,hintProps:o.PropTypes.shape({"*":o.PropTypes.any}),matchWrapperProps:o.PropTypes.shape({"*":o.PropTypes.any}),offscreenClass:o.PropTypes.string,onComplete:o.PropTypes.func,onEntityHighlighted:o.PropTypes.func,onEntitySelected:o.PropTypes.func}),M.defaultProps=T({},f.a.defaultProps,{algorithm:M.mode.FUZZY,clearOnSelection:!1,entities:[],hint:null,hintProps:{},matchWrapperProps:{},offscreenClass:"b-offscreen",onComplete:I,onEntityHighlighted:I,onEntitySelected:I}),M.internalKeys=Object.keys(M.defaultProps);var S=function(){var e=this;this.state={entityMatchIndexes:[],id:b()(),isControlled:k(this.props.inputProps.value),input:this.props.inputProps.value||this.props.inputProps.defaultValue||"",selectedEntityIndex:-1},this.mounted=!1,this.updateInputState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.setState({input:t})},this.getSelectedEntityText=function(){var t=e.props.entities[e.state.selectedEntityIndex];return t?t.text:""},this.resetMatches=function(){e.mounted&&e.setState({selectedEntityIndex:-1,entityMatchIndexes:[]})},this.getInputNode=function(){return e.refs.input.refs.field},this.select=function(){var t=e.getInputNode();t.selectionStart=0,t.selectionEnd=e.getValue().length},this.focus=function(){return e.getInputNode().focus()},this.getValue=function(){return e.refs.input.getValue()},this.setValue=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.refs.input.setValue(t),e.updateInputState(t),e.resetMatches(),e.focus()},this.setValueWithSelectedEntity=function(){e.props.onEntitySelected(e.state.selectedEntityIndex),e.props.clearOnSelection?e.setValue(""):e.setValue(e.getSelectedEntityText()),window.setTimeout(e.resetMatches,0)},this.markMatchSubstring=function(){return e.getMarkingFunction().apply(void 0,arguments)},this.getMatchIndexes=function(){return e.getMatchingFunction().apply(void 0,arguments)},this.handleChange=function(t){e.state.isControlled===!1&&(e.updateInputState(t.target.value),e.computeMatches()),P(e.props.inputProps.onChange)&&e.props.inputProps.onChange(t)},this.handleKeyDown=function(t){switch(t.key){case"ArrowLeft":t.target.selectionStart>1&&t.stopPropagation();break;case"Tab":case"ArrowRight":e.state.selectedEntityIndex!==-1&&e.cursorAtEndOfInput()&&e.getInputNode()===t.target&&!t.shiftKey&&(t.nativeEvent.preventDefault(),e.setValueWithSelectedEntity());break;case"ArrowUp":t.nativeEvent.preventDefault(),e.selectMatch(-1),e.focus();break;case"ArrowDown":t.nativeEvent.preventDefault(),e.selectMatch(1),e.focus();break;case"Escape":e.state.selectedEntityIndex!==-1&&e.getInputNode()===t.target&&e.resetMatches();break;case"Enter":e.state.selectedEntityIndex!==-1&&e.getInputNode()===t.target?(t.nativeEvent.preventDefault(),e.setValueWithSelectedEntity()):e.props.onComplete(e.state.input,t)}P(e.props.onKeyDown)&&e.props.onKeyDown(t)}};t.default=M}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDgzYTFlN2Y2MTQzYjFhYTczZTBjIiwid2VicGFjazovLy9leHRlcm5hbCB7XCJjb21tb25qczJcIjpcImJvdW5kbGVzcy1pbnB1dFwifSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwge1wiY29tbW9uanMyXCI6XCJib3VuZGxlc3MtdXRpbHMtb2JqZWN0LWludGVyc2VjdGlvblwifSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwge1wiY29tbW9uanMyXCI6XCJib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzXCJ9Iiwid2VicGFjazovLy9leHRlcm5hbCB7XCJjb21tb25qczJcIjpcImJvdW5kbGVzcy11dGlscy11dWlkXCJ9Iiwid2VicGFjazovLy9leHRlcm5hbCB7XCJjb21tb25qczJcIjpcImNsYXNzbmFtZXNcIn0iLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcImNvbW1vbmpzMlwiOlwiZXNjYXBlLXN0cmluZy1yZWdleHBcIn0iLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcImNvbW1vbmpzMlwiOlwicmVhY3RcIn0iLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvYm91bmRsZXNzLXR5cGVhaGVhZC9pbmRleC5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsInZhbHVlIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJyZXF1aXJlIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllcyIsIm9iaiIsImtleXMiLCJ0YXJnZXQiLCJpbmRleE9mIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJ3cml0YWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2NsYXNzbmFtZXNfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9jbGFzc25hbWVzX19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9lc2NhcGVfc3RyaW5nX3JlZ2V4cF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2VzY2FwZV9zdHJpbmdfcmVnZXhwX19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19ib3VuZGxlc3NfaW5wdXRfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19ib3VuZGxlc3NfaW5wdXRfX19kZWZhdWx0IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X2JvdW5kbGVzc191dGlsc19vYmplY3RfaW50ZXJzZWN0aW9uX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfYm91bmRsZXNzX3V0aWxzX29iamVjdF9pbnRlcnNlY3Rpb25fX19kZWZhdWx0IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X2JvdW5kbGVzc191dGlsc19vbWl0X2tleXNfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9ib3VuZGxlc3NfdXRpbHNfb21pdF9rZXlzX19fZGVmYXVsdCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9ib3VuZGxlc3NfdXRpbHNfdXVpZF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X2JvdW5kbGVzc191dGlsc191dWlkX19fZGVmYXVsdCIsIl9leHRlbmRzIiwiYXNzaWduIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwia2V5IiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInByb3BzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImlzRnVuY3Rpb24iLCJ4IiwiaXNTdHJpbmciLCJub29wIiwiVHlwZWFoZWFkIiwiX1JlYWN0JFB1cmVDb21wb25lbnQiLCJfcmVmIiwiX3RlbXAiLCJfdGhpcyIsIl9yZXQiLCJ0aGlzIiwiX2xlbiIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJnZXRQcm90b3R5cGVPZiIsImFwcGx5IiwiY29uY2F0IiwiX2luaXRpYWxpc2VQcm9wcyIsImlucHV0UHJvcHMiLCJkZWZhdWx0VmFsdWUiLCJjb21wdXRlTWF0Y2hlcyIsIm1vdW50ZWQiLCJzdGF0ZSIsInNlbGVjdGVkRW50aXR5SW5kZXgiLCJvbkVudGl0eUhpZ2hsaWdodGVkIiwibmV4dFByb3BzIiwiZW50aXRpZXMiLCJ1cGRhdGVJbnB1dFN0YXRlIiwicHJldlByb3BzIiwicHJldlN0YXRlIiwiZW50aXR5TWF0Y2hJbmRleGVzIiwicmVmcyIsIm1hdGNoZXMiLCJzY3JvbGxUb3AiLCJpbmRleCIsInNldFN0YXRlIiwic2V0VmFsdWVXaXRoU2VsZWN0ZWRFbnRpdHkiLCJkZWx0YSIsInRvdGFsTWF0Y2hlcyIsIm5leHRJbmRleCIsIm1hdGNoSW5kZXgiLCJtYXRjaGVzTm9kZSIsIm1hdGNoZXNOb2RlWUVuZCIsImNsaWVudEhlaWdodCIsIm1hdGNoTm9kZSIsIm1hdGNoTm9kZVlTdGFydCIsIm9mZnNldFRvcCIsIm1hdGNoTm9kZVlFbmQiLCJub2RlIiwiZ2V0SW5wdXROb2RlIiwic2VsZWN0aW9uU3RhcnQiLCJzZWxlY3Rpb25FbmQiLCJnZXRWYWx1ZSIsImlucHV0IiwiZW50aXR5IiwiZW50aXR5Q29udGVudCIsInRleHQiLCJmcmFncyIsInNwbGl0IiwiUmVnRXhwIiwibm9ybWFsaXplZFVzZXJUZXh0IiwidG9Mb3dlckNhc2UiLCJ0aHJlc2hvbGQiLCJhIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInNlZWtWYWx1ZSIsImluZGV4U3RhcnQiLCJpbmRleEVuZCIsInNsaWNlIiwiYWxnb3JpdGhtIiwibW9kZSIsIlNUQVJUU19XSVRIIiwibWFya1N0YXJ0c1dpdGhNYXRjaFN1YnN0cmluZyIsIm1hcmtGdXp6eU1hdGNoU3Vic3RyaW5nIiwibWFya2VyIiwidW5kZWZpbmVkIiwid2FybmVkTWFya2VyIiwiY29uc29sZSIsIndhcm4iLCJ1c2VyVGV4dCIsIm5vcm1hbGl6ZWQiLCJyZWR1Y2UiLCJyZXN1bHQiLCJwdXNoIiwicmVzdWx0cyIsImdldFN0YXJ0c1dpdGhNYXRjaEluZGV4ZXMiLCJnZXRGdXp6eU1hdGNoSW5kZXhlcyIsIm1hdGNoZXIiLCJ3YXJuZWRNYXRjaGVyIiwicHJvdmlkZWRFbnRpdGllcyIsIl90aGlzMiIsImN1cnJlbnRWYWx1ZSIsImdldE1hdGNoSW5kZXhlcyIsInJlZiIsImlkIiwib2Zmc2NyZWVuQ2xhc3MiLCJhcmlhLWxpdmUiLCJyb2xlIiwiZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0IiwiaGludCIsInJhdyIsInByb2Nlc3NlZCIsInJlcGxhY2UiLCJoaW50UHJvcHMiLCJ0YWJJbmRleCIsIl90aGlzMyIsIm1hdGNoV3JhcHBlclByb3BzIiwibWFwIiwicmVzdCIsImItdHlwZWFoZWFkLW1hdGNoLXNlbGVjdGVkIiwib25DbGljayIsImhhbmRsZU1hdGNoQ2xpY2siLCJiaW5kIiwibWFya01hdGNoU3Vic3RyaW5nIiwiaW50ZXJuYWxLZXlzIiwib25LZXlEb3duIiwiaGFuZGxlS2V5RG93biIsInJlbmRlck5vdGlmaWNhdGlvbiIsInJlbmRlckhpbnQiLCJkZWZhdWx0UHJvcHMiLCJhcmlhLWNvbnRyb2xzIiwib25DaGFuZ2UiLCJoYW5kbGVDaGFuZ2UiLCJyZW5kZXJNYXRjaGVzIiwiUHVyZUNvbXBvbmVudCIsIkZVWlpZIiwicHJvcFR5cGVzIiwib25lT2ZUeXBlIiwib25lT2YiLCJzaGFwZSIsImZ1bmMiLCJjbGVhck9uU2VsZWN0aW9uIiwiYm9vbCIsImFycmF5T2YiLCJzdHJpbmciLCJpc1JlcXVpcmVkIiwiKiIsImFueSIsIm9uQ29tcGxldGUiLCJvbkVudGl0eVNlbGVjdGVkIiwiX3RoaXM0IiwiaXNDb250cm9sbGVkIiwicmVzZXRNYXRjaGVzIiwiZmllbGQiLCJzZWxlY3QiLCJmb2N1cyIsInNldFZhbHVlIiwid2luZG93Iiwic2V0VGltZW91dCIsImdldE1hcmtpbmdGdW5jdGlvbiIsImdldE1hdGNoaW5nRnVuY3Rpb24iLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImN1cnNvckF0RW5kT2ZJbnB1dCIsInNoaWZ0S2V5IiwibmF0aXZlRXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInNlbGVjdE1hdGNoIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBT0MsUUFDRSxTQUFVQyxHQ0duQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUgsT0FHQSxJQUFBRCxHQUFBSyxFQUFBRCxJQUNBRSxFQUFBRixFQUNBRyxHQUFBLEVBQ0FOLFdBVUEsT0FOQUMsR0FBQUUsR0FBQUksS0FBQVIsRUFBQUMsUUFBQUQsSUFBQUMsUUFBQUUsR0FHQUgsRUFBQU8sR0FBQSxFQUdBUCxFQUFBQyxRQXZCQSxHQUFBSSxLQStEQSxPQW5DQUYsR0FBQU0sRUFBQVAsRUFHQUMsRUFBQU8sRUFBQUwsRUFHQUYsRUFBQUcsRUFBQSxTQUFBSyxHQUEyQyxNQUFBQSxJQUczQ1IsRUFBQVMsRUFBQSxTQUFBWCxFQUFBWSxFQUFBQyxHQUNBWCxFQUFBWSxFQUFBZCxFQUFBWSxJQUNBRyxPQUFBQyxlQUFBaEIs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QUFNcE0sT0FBT3ZCLE9BQ25DZ04sRUFBS3pILGtCQUdMckIsRUFBVzhJLEVBQUtsSixNQUFNdUIsV0FBV3dHLFdBQ2pDbUIsRUFBS2xKLE1BQU11QixXQUFXd0csU0FBUzhCLElUdlc4Z2QvSSxLUzJXcmpkNEcsY0FBZ0IsU0FBQ21DLEdBQ2IsT0FBUUEsRUFBTWhLLEtBQ2QsSUFBSyxZQUNHZ0ssRUFBTXBNLE9BQU84RixlQUFpQixHQUM5QnNHLEVBQU1DLGlCQUdWLE1BRUosS0FBSyxNQUNMLElBQUssYUFDTVosRUFBS3ZILE1BQU1DLHVCQUF3QixHQUNuQ3NILEVBQUthLHNCQUNMYixFQUFLNUYsaUJBQW1CdUcsRUFBTXBNLFNBQzdCb00sRUFBTUcsV0FDVkgsRUFBTUksWUFBWUMsaUJBQ2xCaEIsRUFBS3pHLDZCQUdULE1BRUosS0FBSyxVQUNEb0gsRUFBTUksWUFBWUMsaUJBQ2xCaEIsRUFBS2lCLGFBQVksR0FDakJqQixFQUFLSyxPQUNMLE1BRUosS0FBSyxZQUNETSxFQUFNSSxZQUFZQyxpQkFDbEJoQixFQUFLaUIsWUFBWSxHQUNqQmpCLEVBQUtLLE9BQ0wsTUFFSixLQUFLLFNBQ01MLEVBQUt2SCxNQUFNQyx1QkFBd0IsR0FDbkNzSCxFQUFLNUYsaUJBQW1CdUcsRUFBTXBNLFFBQ2pDeUwsRUFBS0UsY0FHVCxNQUVKLEtBQUssUUFDTUYsRUFBS3ZILE1BQU1DLHVCQUF3QixHQUNuQ3NILEVBQUs1RixpQkFBbUJ1RyxFQUFNcE0sUUFDakNvTSxFQUFNSSxZQUFZQyxpQkFDbEJoQixFQUFLekcsOEJBRUx5RyxFQUFLbEosTUFBTWdKLFdBQVdFLEVBQUt2SCxNQUFNK0IsTUFBT21HLEdBTTVDekosRUFBVzhJLEVBQUtsSixNQUFNeUgsWUFDdEJ5QixFQUFLbEosTUFBTXlILFVBQVVvQyxJVGphb2dmeE0sR0FBNkIsUVNqRDdpZm1EIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPVxuLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDcpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJib3VuZGxlc3MtaW5wdXRcIik7XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJib3VuZGxlc3MtdXRpbHMtb2JqZWN0LWludGVyc2VjdGlvblwiKTtcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJvdW5kbGVzcy11dGlscy1vbWl0LWtleXNcIik7XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJib3VuZGxlc3MtdXRpbHMtdXVpZFwiKTtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNsYXNzbmFtZXNcIik7XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJlc2NhcGUtc3RyaW5nLXJlZ2V4cFwiKTtcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInJlYWN0XCIpO1xuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9jbGFzc25hbWVzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9jbGFzc25hbWVzX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfY2xhc3NuYW1lc19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfZXNjYXBlX3N0cmluZ19yZWdleHBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2VzY2FwZV9zdHJpbmdfcmVnZXhwX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfZXNjYXBlX3N0cmluZ19yZWdleHBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2JvdW5kbGVzc19pbnB1dF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfYm91bmRsZXNzX2lucHV0X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfYm91bmRsZXNzX2lucHV0X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9ib3VuZGxlc3NfdXRpbHNfb2JqZWN0X2ludGVyc2VjdGlvbl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfYm91bmRsZXNzX3V0aWxzX29iamVjdF9pbnRlcnNlY3Rpb25fX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9ib3VuZGxlc3NfdXRpbHNfb2JqZWN0X2ludGVyc2VjdGlvbl9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfYm91bmRsZXNzX3V0aWxzX29taXRfa2V5c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfYm91bmRsZXNzX3V0aWxzX29taXRfa2V5c19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X2JvdW5kbGVzc191dGlsc19vbWl0X2tleXNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X2JvdW5kbGVzc191dGlsc191dWlkX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9ib3VuZGxlc3NfdXRpbHNfdXVpZF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X2JvdW5kbGVzc191dGlsc191dWlkX18pO1xudmFyIF9leHRlbmRzPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV07Zm9yKHZhciBrZXkgaW4gc291cmNlKXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLGtleSkpe3RhcmdldFtrZXldPXNvdXJjZVtrZXldO319fXJldHVybiB0YXJnZXQ7fTt2YXIgX2NyZWF0ZUNsYXNzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZihcInZhbHVlXCJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319cmV0dXJuIGZ1bmN0aW9uKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO307fSgpO2Z1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosa2V5cyl7dmFyIHRhcmdldD17fTtmb3IodmFyIGkgaW4gb2JqKXtpZihrZXlzLmluZGV4T2YoaSk+PTApY29udGludWU7aWYoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosaSkpY29udGludWU7dGFyZ2V0W2ldPW9ialtpXTt9cmV0dXJuIHRhcmdldDt9ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO319ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZixjYWxsKXtpZighc2VsZil7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO31yZXR1cm4gY2FsbCYmKHR5cGVvZiBjYWxsPT09XCJvYmplY3RcInx8dHlwZW9mIGNhbGw9PT1cImZ1bmN0aW9uXCIpP2NhbGw6c2VsZjt9ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLHN1cGVyQ2xhc3Mpe2lmKHR5cGVvZiBzdXBlckNsYXNzIT09XCJmdW5jdGlvblwiJiZzdXBlckNsYXNzIT09bnVsbCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHN1cGVyQ2xhc3MpO31zdWJDbGFzcy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzJiZzdXBlckNsYXNzLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnN1YkNsYXNzLGVudW1lcmFibGU6ZmFsc2Usd3JpdGFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZX19KTtpZihzdXBlckNsYXNzKU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3Msc3VwZXJDbGFzcyk6c3ViQ2xhc3MuX19wcm90b19fPXN1cGVyQ2xhc3M7fXZhciBpc0Z1bmN0aW9uPWZ1bmN0aW9uIGlzRnVuY3Rpb24oeCl7cmV0dXJuIHR5cGVvZiB4PT09J2Z1bmN0aW9uJzt9O3ZhciBpc1N0cmluZz1mdW5jdGlvbiBpc1N0cmluZyh4KXtyZXR1cm4gdHlwZW9mIHg9PT0nc3RyaW5nJzt9O3ZhciBub29wPWZ1bmN0aW9uIG5vb3AoKXt9O3ZhciBUeXBlYWhlYWQ9ZnVuY3Rpb24oX1JlYWN0JFB1cmVDb21wb25lbnQpe19pbmhlcml0cyhUeXBlYWhlYWQsX1JlYWN0JFB1cmVDb21wb25lbnQpO2Z1bmN0aW9uIFR5cGVhaGVhZCgpe3ZhciBfcmVmO3ZhciBfdGVtcCxfdGhpcyxfcmV0O19jbGFzc0NhbGxDaGVjayh0aGlzLFR5cGVhaGVhZCk7Zm9yKHZhciBfbGVuPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1BcnJheShfbGVuKSxfa2V5PTA7X2tleTxfbGVuO19rZXkrKyl7YXJnc1tfa2V5XT1hcmd1bWVudHNbX2tleV07fXJldHVybiBfcmV0PShfdGVtcD0oX3RoaXM9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoX3JlZj1UeXBlYWhlYWQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoVHlwZWFoZWFkKSkuY2FsbC5hcHBseShfcmVmLFt0aGlzXS5jb25jYXQoYXJncykpKSxfdGhpcyksX2luaXRpYWxpc2VQcm9wcy5jYWxsKF90aGlzKSxfdGVtcCksX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsX3JldCk7fV9jcmVhdGVDbGFzcyhUeXBlYWhlYWQsW3trZXk6J2NvbXBvbmVudFdpbGxNb3VudCcsdmFsdWU6ZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCl7aWYodGhpcy5wcm9wcy5pbnB1dFByb3BzLnZhbHVlfHx0aGlzLnByb3BzLmlucHV0UHJvcHMuZGVmYXVsdFZhbHVlKXt0aGlzLmNvbXB1dGVNYXRjaGVzKCk7fX19LHtrZXk6J2NvbXBvbmVudERpZE1vdW50Jyx2YWx1ZTpmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpe3RoaXMubW91bnRlZD10cnVlO2lmKHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleD49MCl7dGhpcy5wcm9wcy5vbkVudGl0eUhpZ2hsaWdodGVkKHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCk7fX19LHtrZXk6J2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLHZhbHVlOmZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKXtpZihuZXh0UHJvcHMuZW50aXRpZXMhPT10aGlzLnByb3BzLmVudGl0aWVzKXt0aGlzLmNvbXB1dGVNYXRjaGVzKG5leHRQcm9wcy5lbnRpdGllcyk7fWlmKG5leHRQcm9wcy5pbnB1dFByb3BzLnZhbHVlIT09dGhpcy5wcm9wcy5pbnB1dFByb3BzLnZhbHVlKXt0aGlzLnVwZGF0ZUlucHV0U3RhdGUobmV4dFByb3BzLmlucHV0UHJvcHMudmFsdWUpO3RoaXMuY29tcHV0ZU1hdGNoZXMoKTt9fX0se2tleTonY29tcG9uZW50RGlkVXBkYXRlJyx2YWx1ZTpmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLHByZXZTdGF0ZSl7aWYodGhpcy5zdGF0ZS5lbnRpdHlNYXRjaEluZGV4ZXMubGVuZ3RoJiYhcHJldlN0YXRlLmVudGl0eU1hdGNoSW5kZXhlcy5sZW5ndGgpe3RoaXMucmVmcy5tYXRjaGVzLnNjcm9sbFRvcD0wO31pZih0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXg+PTAmJnRoaXMucHJvcHMuZW50aXRpZXNbdGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4XSE9PXByZXZQcm9wcy5lbnRpdGllc1twcmV2U3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleF0pe3RoaXMucHJvcHMub25FbnRpdHlIaWdobGlnaHRlZCh0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXgpO319fSx7a2V5Oidjb21wb25lbnRXaWxsVW5tb3VudCcsdmFsdWU6ZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKXt0aGlzLm1vdW50ZWQ9ZmFsc2U7fX0se2tleTonaGFuZGxlTWF0Y2hDbGljaycsdmFsdWU6ZnVuY3Rpb24gaGFuZGxlTWF0Y2hDbGljayhpbmRleCl7dGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRFbnRpdHlJbmRleDppbmRleH0sdGhpcy5zZXRWYWx1ZVdpdGhTZWxlY3RlZEVudGl0eSk7fX0se2tleTonc2VsZWN0TWF0Y2gnLHZhbHVlOmZ1bmN0aW9uIHNlbGVjdE1hdGNoKGRlbHRhKXt2YXIgbWF0Y2hlcz10aGlzLnN0YXRlLmVudGl0eU1hdGNoSW5kZXhlczt2YXIgdG90YWxNYXRjaGVzPW1hdGNoZXMubGVuZ3RoO3ZhciBuZXh0SW5kZXg9bWF0Y2hlcy5pbmRleE9mKHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCkrZGVsdGE7aWYodG90YWxNYXRjaGVzKXtpZihuZXh0SW5kZXg8MCl7bmV4dEluZGV4PXRvdGFsTWF0Y2hlcy0xO31lbHNlIGlmKG5leHRJbmRleD49dG90YWxNYXRjaGVzKXtuZXh0SW5kZXg9MDt9dmFyIG1hdGNoSW5kZXg9bWF0Y2hlc1tuZXh0SW5kZXhdO3ZhciBtYXRjaGVzTm9kZT10aGlzLnJlZnMubWF0Y2hlczt2YXIgbWF0Y2hlc05vZGVZRW5kPW1hdGNoZXNOb2RlLnNjcm9sbFRvcCttYXRjaGVzTm9kZS5jbGllbnRIZWlnaHQ7dmFyIG1hdGNoTm9kZT10aGlzLnJlZnNbJ21hdGNoXyQnK21hdGNoSW5kZXhdO3ZhciBtYXRjaE5vZGVZU3RhcnQ9bWF0Y2hOb2RlLm9mZnNldFRvcDt2YXIgbWF0Y2hOb2RlWUVuZD1tYXRjaE5vZGVZU3RhcnQrbWF0Y2hOb2RlLmNsaWVudEhlaWdodDtpZihtYXRjaE5vZGVZRW5kPj1tYXRjaGVzTm9kZVlFbmQpe21hdGNoZXNOb2RlLnNjcm9sbFRvcCs9bWF0Y2hOb2RlWUVuZC1tYXRjaGVzTm9kZVlFbmQ7fWVsc2UgaWYobWF0Y2hOb2RlWVN0YXJ0PD1tYXRjaGVzTm9kZS5zY3JvbGxUb3Ape21hdGNoZXNOb2RlLnNjcm9sbFRvcD1tYXRjaE5vZGVZU3RhcnQ7fXRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkRW50aXR5SW5kZXg6bWF0Y2hJbmRleH0pO319fSx7a2V5OidjdXJzb3JBdEVuZE9mSW5wdXQnLHZhbHVlOmZ1bmN0aW9uIGN1cnNvckF0RW5kT2ZJbnB1dCgpe3ZhciBub2RlPXRoaXMuZ2V0SW5wdXROb2RlKCk7cmV0dXJuIG5vZGUuc2VsZWN0aW9uU3RhcnQ9PT1ub2RlLnNlbGVjdGlvbkVuZCYmbm9kZS5zZWxlY3Rpb25FbmQ9PT10aGlzLmdldFZhbHVlKCkubGVuZ3RoO319LHtrZXk6J21hcmtGdXp6eU1hdGNoU3Vic3RyaW5nJyx2YWx1ZTpmdW5jdGlvbiBtYXJrRnV6enlNYXRjaFN1YnN0cmluZyhpbnB1dCxlbnRpdHkpe3ZhciBlbnRpdHlDb250ZW50PWVudGl0eS50ZXh0O3ZhciBmcmFncz1lbnRpdHlDb250ZW50LnNwbGl0KG5ldyBSZWdFeHAoJygnK19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9lc2NhcGVfc3RyaW5nX3JlZ2V4cF9fX2RlZmF1bHQoKShpbnB1dCkrJyknLCdpZycpKTt2YXIgbm9ybWFsaXplZFVzZXJUZXh0PWlucHV0LnRvTG93ZXJDYXNlKCk7dmFyIHRocmVzaG9sZD1mcmFncy5sZW5ndGg7dmFyIGk9LTE7d2hpbGUoKytpPHRocmVzaG9sZCl7aWYoZnJhZ3NbaV0udG9Mb3dlckNhc2UoKT09PW5vcm1hbGl6ZWRVc2VyVGV4dCl7ZnJhZ3NbaV09X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoJ21hcmsnLHtrZXk6aSxjbGFzc05hbWU6J2ItdHlwZWFoZWFkLW1hdGNoLWhpZ2hsaWdodCd9LGZyYWdzW2ldKTt9fXJldHVybiBmcmFnczt9fSx7a2V5OidtYXJrU3RhcnRzV2l0aE1hdGNoU3Vic3RyaW5nJyx2YWx1ZTpmdW5jdGlvbiBtYXJrU3RhcnRzV2l0aE1hdGNoU3Vic3RyaW5nKGlucHV0LGVudGl0eSl7dmFyIGVudGl0eUNvbnRlbnQ9ZW50aXR5LnRleHQ7dmFyIHNlZWtWYWx1ZT1pbnB1dC50b0xvd2VyQ2FzZSgpO3ZhciBpbmRleFN0YXJ0PWVudGl0eUNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlZWtWYWx1ZSk7dmFyIGluZGV4RW5kPWluZGV4U3RhcnQrc2Vla1ZhbHVlLmxlbmd0aDtyZXR1cm5bX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLHtrZXk6JzAnfSxlbnRpdHlDb250ZW50LnNsaWNlKDAsaW5kZXhTdGFydCkpLF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KCdtYXJrJyx7a2V5OicxJyxjbGFzc05hbWU6J2ItdHlwZWFoZWFkLW1hdGNoLWhpZ2hsaWdodCd9LGVudGl0eUNvbnRlbnQuc2xpY2UoaW5kZXhTdGFydCxpbmRleEVuZCkpLF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KCdzcGFuJyx7a2V5OicyJ30sZW50aXR5Q29udGVudC5zbGljZShpbmRleEVuZCkpXTt9fSx7a2V5OidnZXRNYXJraW5nRnVuY3Rpb24nLHZhbHVlOmZ1bmN0aW9uIGdldE1hcmtpbmdGdW5jdGlvbigpe2lmKGlzU3RyaW5nKHRoaXMucHJvcHMuYWxnb3JpdGhtKSl7aWYodGhpcy5wcm9wcy5hbGdvcml0aG09PT1UeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSCl7cmV0dXJuIHRoaXMubWFya1N0YXJ0c1dpdGhNYXRjaFN1YnN0cmluZzt9cmV0dXJuIHRoaXMubWFya0Z1enp5TWF0Y2hTdWJzdHJpbmc7fWVsc2UgaWYoaXNGdW5jdGlvbih0aGlzLnByb3BzLmFsZ29yaXRobS5tYXJrZXIpKXtyZXR1cm4gdGhpcy5wcm9wcy5hbGdvcml0aG0ubWFya2VyO31pZih0aGlzLndhcm5lZE1hcmtlcj09PXVuZGVmaW5lZCl7dGhpcy53YXJuZWRNYXJrZXI9dHJ1ZTtjb25zb2xlLndhcm4oJ1R5cGVhaGVhZDogbm8gYHByb3BzLmFsZ29yaXRobS5tYXJrZXJgIHdhcyBwcm92aWRlZDsgZmFsbGluZyBiYWNrIHRvIHRoZSBkZWZhdWx0IG1hcmtpbmcgYWxnb3JpdGhtIChGVVpaWSkuJyk7fXJldHVybiB0aGlzLm1hcmtGdXp6eU1hdGNoU3Vic3RyaW5nO319LHtrZXk6J2dldEZ1enp5TWF0Y2hJbmRleGVzJyx2YWx1ZTpmdW5jdGlvbiBnZXRGdXp6eU1hdGNoSW5kZXhlcyh1c2VyVGV4dCxlbnRpdGllcyl7dmFyIG5vcm1hbGl6ZWQ9dXNlclRleHQudG9Mb3dlckNhc2UoKTtyZXR1cm4gZW50aXRpZXMucmVkdWNlKGZ1bmN0aW9uIGZpbmRJbmRleGVzKHJlc3VsdCxlbnRpdHksaW5kZXgpe3JldHVybiBlbnRpdHkudGV4dC50b0xvd2VyQ2FzZSgpLmluZGV4T2Yobm9ybWFsaXplZCkhPT0tMT9yZXN1bHQucHVzaChpbmRleCkmJnJlc3VsdDpyZXN1bHQ7fSxbXSk7fX0se2tleTonZ2V0U3RhcnRzV2l0aE1hdGNoSW5kZXhlcycsdmFsdWU6ZnVuY3Rpb24gZ2V0U3RhcnRzV2l0aE1hdGNoSW5kZXhlcyh1c2VyVGV4dCxlbnRpdGllcyl7dmFyIHNlZWtWYWx1ZT11c2VyVGV4dC50b0xvd2VyQ2FzZSgpO3JldHVybiBlbnRpdGllcy5yZWR1Y2UoZnVuY3Rpb24gc2Vla01hdGNoKHJlc3VsdHMsZW50aXR5LGluZGV4KXtpZihlbnRpdHkudGV4dC50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2Vla1ZhbHVlKT09PTApe3Jlc3VsdHMucHVzaChpbmRleCk7fXJldHVybiByZXN1bHRzO30sW10pO319LHtrZXk6J2dldE1hdGNoaW5nRnVuY3Rpb24nLHZhbHVlOmZ1bmN0aW9uIGdldE1hdGNoaW5nRnVuY3Rpb24oKXtpZihpc1N0cmluZyh0aGlzLnByb3BzLmFsZ29yaXRobSkpe2lmKHRoaXMucHJvcHMuYWxnb3JpdGhtPT09VHlwZWFoZWFkLm1vZGUuU1RBUlRTX1dJVEgpe3JldHVybiB0aGlzLmdldFN0YXJ0c1dpdGhNYXRjaEluZGV4ZXM7fXJldHVybiB0aGlzLmdldEZ1enp5TWF0Y2hJbmRleGVzO31lbHNlIGlmKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5hbGdvcml0aG0ubWF0Y2hlcikpe3JldHVybiB0aGlzLnByb3BzLmFsZ29yaXRobS5tYXRjaGVyO31pZih0aGlzLndhcm5lZE1hdGNoZXI9PT11bmRlZmluZWQpe3RoaXMud2FybmVkTWF0Y2hlcj10cnVlO2NvbnNvbGUud2FybignVHlwZWFoZWFkOiBubyBgcHJvcHMuYWxnb3JpdGhtLm1hdGNoZXJgIHdhcyBwcm92aWRlZDsgZmFsbGluZyBiYWNrIHRvIHRoZSBkZWZhdWx0IG1hdGNoaW5nIGFsZ29yaXRobSAoRlVaWlkpLicpO31yZXR1cm4gdGhpcy5nZXRGdXp6eU1hdGNoSW5kZXhlczt9fSx7a2V5Oidjb21wdXRlTWF0Y2hlcycsdmFsdWU6ZnVuY3Rpb24gY29tcHV0ZU1hdGNoZXMocHJvdmlkZWRFbnRpdGllcyl7dmFyIF90aGlzMj10aGlzO3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24oc3RhdGUscHJvcHMpe3ZhciBlbnRpdGllcz1wcm92aWRlZEVudGl0aWVzfHxwcm9wcy5lbnRpdGllczt2YXIgY3VycmVudFZhbHVlPXN0YXRlLmlucHV0O3ZhciBtYXRjaGVzPWN1cnJlbnRWYWx1ZT09PScnP1tdOl90aGlzMi5nZXRNYXRjaEluZGV4ZXMoY3VycmVudFZhbHVlLGVudGl0aWVzKTtyZXR1cm57c2VsZWN0ZWRFbnRpdHlJbmRleDptYXRjaGVzLmxlbmd0aD9tYXRjaGVzWzBdOi0xLGVudGl0eU1hdGNoSW5kZXhlczptYXRjaGVzfTt9KTt9fSx7a2V5OidyZW5kZXJOb3RpZmljYXRpb24nLHZhbHVlOmZ1bmN0aW9uIHJlbmRlck5vdGlmaWNhdGlvbigpe3JldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX19kZWZhdWx0LmEuY3JlYXRlRWxlbWVudCgnZGl2Jyx7cmVmOidhcmlhJyxpZDp0aGlzLnN0YXRlLmlkLGNsYXNzTmFtZTp0aGlzLnByb3BzLm9mZnNjcmVlbkNsYXNzLCdhcmlhLWxpdmUnOidwb2xpdGUnLHJvbGU6J3N0YXR1cyd9LHRoaXMuZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0KCkpO319LHtrZXk6J3JlbmRlckhpbnQnLHZhbHVlOmZ1bmN0aW9uIHJlbmRlckhpbnQoKXtpZih0aGlzLnByb3BzLmhpbnQpe3ZhciB1c2VyVGV4dD10aGlzLnN0YXRlLmlucHV0O3ZhciByYXc9dGhpcy5nZXRTZWxlY3RlZEVudGl0eVRleHQoKTt2YXIgcHJvY2Vzc2VkPScnO2lmKHJhdyYmcmF3LnRvTG93ZXJDYXNlKCkuaW5kZXhPZih1c2VyVGV4dC50b0xvd2VyQ2FzZSgpKT09PTApe3Byb2Nlc3NlZD1yYXcucmVwbGFjZShuZXcgUmVnRXhwKHVzZXJUZXh0LCdpJyksdXNlclRleHQpO31yZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoJ2RpdicsX2V4dGVuZHMoe30sdGhpcy5wcm9wcy5oaW50UHJvcHMse3JlZjonaGludCcsY2xhc3NOYW1lOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9jbGFzc25hbWVzX19fZGVmYXVsdCgpKCdiLWlucHV0JywnYi1pbnB1dC1wbGFjZWhvbGRlcicsJ2ItdHlwZWFoZWFkLWhpbnQnLHRoaXMucHJvcHMuaGludFByb3BzLmNsYXNzTmFtZSksdGFiSW5kZXg6Jy0xJ30pLHByb2Nlc3NlZCk7fX19LHtrZXk6J3JlbmRlck1hdGNoZXMnLHZhbHVlOmZ1bmN0aW9uIHJlbmRlck1hdGNoZXMoKXt2YXIgX3RoaXMzPXRoaXM7aWYodGhpcy5zdGF0ZS5lbnRpdHlNYXRjaEluZGV4ZXMubGVuZ3RoKXt2YXIgcHJvcHM9dGhpcy5wcm9wcy5tYXRjaFdyYXBwZXJQcm9wcztyZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoJ2RpdicsX2V4dGVuZHMoe30scHJvcHMse3JlZjonbWF0Y2hlcycsY2xhc3NOYW1lOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9jbGFzc25hbWVzX19fZGVmYXVsdCgpKCdiLXR5cGVhaGVhZC1tYXRjaC13cmFwcGVyJyxwcm9wcy5jbGFzc05hbWUpLHJvbGU6J2xpc3Rib3gnfSksdGhpcy5zdGF0ZS5lbnRpdHlNYXRjaEluZGV4ZXMubWFwKGZ1bmN0aW9uKGluZGV4KXt2YXIgZW50aXR5PV90aGlzMy5wcm9wcy5lbnRpdGllc1tpbmRleF07dmFyIGNsYXNzTmFtZT1lbnRpdHkuY2xhc3NOYW1lLHRleHQ9ZW50aXR5LnRleHQscmVzdD1fb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoZW50aXR5LFsnY2xhc3NOYW1lJywndGV4dCddKTtyZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoJ2RpdicsX2V4dGVuZHMoe30scmVzdCx7cmVmOidtYXRjaF8kJytpbmRleCxjbGFzc05hbWU6X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2NsYXNzbmFtZXNfX19kZWZhdWx0KCkoJ2ItdHlwZWFoZWFkLW1hdGNoJyxjbGFzc05hbWUseydiLXR5cGVhaGVhZC1tYXRjaC1zZWxlY3RlZCc6X3RoaXMzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXg9PT1pbmRleH0pLGtleTp0ZXh0LG9uQ2xpY2s6X3RoaXMzLmhhbmRsZU1hdGNoQ2xpY2suYmluZChfdGhpczMsaW5kZXgpLHJvbGU6J29wdGlvbid9KSxfdGhpczMubWFya01hdGNoU3Vic3RyaW5nKF90aGlzMy5zdGF0ZS5pbnB1dCxlbnRpdHkpKTt9KSk7fX19LHtrZXk6J3JlbmRlcicsdmFsdWU6ZnVuY3Rpb24gcmVuZGVyKCl7dmFyIHByb3BzPXRoaXMucHJvcHMsc3RhdGU9dGhpcy5zdGF0ZTtyZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19fZGVmYXVsdC5hLmNyZWF0ZUVsZW1lbnQoJ2RpdicsX2V4dGVuZHMoe30sX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X2JvdW5kbGVzc191dGlsc19vbWl0X2tleXNfX19kZWZhdWx0KCkocHJvcHMsVHlwZWFoZWFkLmludGVybmFsS2V5cykse3JlZjond3JhcHBlcicsY2xhc3NOYW1lOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9jbGFzc25hbWVzX19fZGVmYXVsdCgpKCdiLXR5cGVhaGVhZC13cmFwcGVyJyxwcm9wcy5jbGFzc05hbWUpLG9uS2V5RG93bjp0aGlzLmhhbmRsZUtleURvd259KSx0aGlzLnJlbmRlck5vdGlmaWNhdGlvbigpLHRoaXMucmVuZGVySGludCgpLF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5jcmVhdGVFbGVtZW50KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19ib3VuZGxlc3NfaW5wdXRfX19kZWZhdWx0LmEsX2V4dGVuZHMoe30sX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X2JvdW5kbGVzc191dGlsc19vYmplY3RfaW50ZXJzZWN0aW9uX19fZGVmYXVsdCgpKHByb3BzLF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19ib3VuZGxlc3NfaW5wdXRfX19kZWZhdWx0LmEuZGVmYXVsdFByb3BzKSx7cmVmOidpbnB1dCcsJ2FyaWEtY29udHJvbHMnOnN0YXRlLmlkLGlucHV0UHJvcHM6X2V4dGVuZHMoe30scHJvcHMuaW5wdXRQcm9wcyx7Y2xhc3NOYW1lOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9jbGFzc25hbWVzX19fZGVmYXVsdCgpKCdiLXR5cGVhaGVhZCcscHJvcHMuaW5wdXRQcm9wcy5jbGFzc05hbWUpLG9uQ2hhbmdlOnRoaXMuaGFuZGxlQ2hhbmdlfSl9KSksdGhpcy5yZW5kZXJNYXRjaGVzKCkpO319XSk7cmV0dXJuIFR5cGVhaGVhZDt9KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fX2RlZmF1bHQuYS5QdXJlQ29tcG9uZW50KTtUeXBlYWhlYWQubW9kZT17J1NUQVJUU19XSVRIJzpfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfYm91bmRsZXNzX3V0aWxzX3V1aWRfX19kZWZhdWx0KCkoKSwnRlVaWlknOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9ib3VuZGxlc3NfdXRpbHNfdXVpZF9fX2RlZmF1bHQoKSgpfTtUeXBlYWhlYWQucHJvcFR5cGVzPV9leHRlbmRzKHt9LF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19ib3VuZGxlc3NfaW5wdXRfX19kZWZhdWx0LmEucHJvcFR5cGVzLHthbGdvcml0aG06X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19bXCJQcm9wVHlwZXNcIl0ub25lT2ZUeXBlKFtfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcIlByb3BUeXBlc1wiXS5vbmVPZihbVHlwZWFoZWFkLm1vZGUuU1RBUlRTX1dJVEgsVHlwZWFoZWFkLm1vZGUuRlVaWlldKSxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcIlByb3BUeXBlc1wiXS5zaGFwZSh7bWFya2VyOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLm9uZU9mVHlwZShbX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19bXCJQcm9wVHlwZXNcIl0uZnVuYyxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcIlByb3BUeXBlc1wiXS5vbmVPZihbVHlwZWFoZWFkLm1vZGUuU1RBUlRTX1dJVEgsVHlwZWFoZWFkLm1vZGUuRlVaWlldKV0pLG1hdGNoZXI6X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19bXCJQcm9wVHlwZXNcIl0ub25lT2ZUeXBlKFtfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcIlByb3BUeXBlc1wiXS5mdW5jLF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLm9uZU9mKFtUeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSCxUeXBlYWhlYWQubW9kZS5GVVpaWV0pXSl9KV0pLGNsZWFyT25TZWxlY3Rpb246X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19bXCJQcm9wVHlwZXNcIl0uYm9vbCxlbnRpdGllczpfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcIlByb3BUeXBlc1wiXS5hcnJheU9mKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLnNoYXBlKHt0ZXh0Ol9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLnN0cmluZy5pc1JlcXVpcmVkfSkpLGhpbnQ6X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19bXCJQcm9wVHlwZXNcIl0uYm9vbCxoaW50UHJvcHM6X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19bXCJQcm9wVHlwZXNcIl0uc2hhcGUoeycqJzpfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcIlByb3BUeXBlc1wiXS5hbnl9KSxtYXRjaFdyYXBwZXJQcm9wczpfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcIlByb3BUeXBlc1wiXS5zaGFwZSh7JyonOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLmFueX0pLG9mZnNjcmVlbkNsYXNzOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLnN0cmluZyxvbkNvbXBsZXRlOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLmZ1bmMsb25FbnRpdHlIaWdobGlnaHRlZDpfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcIlByb3BUeXBlc1wiXS5mdW5jLG9uRW50aXR5U2VsZWN0ZWQ6X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19bXCJQcm9wVHlwZXNcIl0uZnVuY30pO1R5cGVhaGVhZC5kZWZhdWx0UHJvcHM9X2V4dGVuZHMoe30sX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2JvdW5kbGVzc19pbnB1dF9fX2RlZmF1bHQuYS5kZWZhdWx0UHJvcHMse2FsZ29yaXRobTpUeXBlYWhlYWQubW9kZS5GVVpaWSxjbGVhck9uU2VsZWN0aW9uOmZhbHNlLGVudGl0aWVzOltdLGhpbnQ6bnVsbCxoaW50UHJvcHM6e30sbWF0Y2hXcmFwcGVyUHJvcHM6e30sb2Zmc2NyZWVuQ2xhc3M6J2Itb2Zmc2NyZWVuJyxvbkNvbXBsZXRlOm5vb3Asb25FbnRpdHlIaWdobGlnaHRlZDpub29wLG9uRW50aXR5U2VsZWN0ZWQ6bm9vcH0pO1R5cGVhaGVhZC5pbnRlcm5hbEtleXM9T2JqZWN0LmtleXMoVHlwZWFoZWFkLmRlZmF1bHRQcm9wcyk7dmFyIF9pbml0aWFsaXNlUHJvcHM9ZnVuY3Rpb24gX2luaXRpYWxpc2VQcm9wcygpe3ZhciBfdGhpczQ9dGhpczt0aGlzLnN0YXRlPXtlbnRpdHlNYXRjaEluZGV4ZXM6W10saWQ6X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X2JvdW5kbGVzc191dGlsc191dWlkX19fZGVmYXVsdCgpKCksaXNDb250cm9sbGVkOmlzU3RyaW5nKHRoaXMucHJvcHMuaW5wdXRQcm9wcy52YWx1ZSksaW5wdXQ6dGhpcy5wcm9wcy5pbnB1dFByb3BzLnZhbHVlfHx0aGlzLnByb3BzLmlucHV0UHJvcHMuZGVmYXVsdFZhbHVlfHwnJyxzZWxlY3RlZEVudGl0eUluZGV4Oi0xfTt0aGlzLm1vdW50ZWQ9ZmFsc2U7dGhpcy51cGRhdGVJbnB1dFN0YXRlPWZ1bmN0aW9uKCl7dmFyIHZhbHVlPWFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1swXTonJztyZXR1cm4gX3RoaXM0LnNldFN0YXRlKHtpbnB1dDp2YWx1ZX0pO307dGhpcy5nZXRTZWxlY3RlZEVudGl0eVRleHQ9ZnVuY3Rpb24oKXt2YXIgZW50aXR5PV90aGlzNC5wcm9wcy5lbnRpdGllc1tfdGhpczQuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleF07cmV0dXJuIGVudGl0eT9lbnRpdHkudGV4dDonJzt9O3RoaXMucmVzZXRNYXRjaGVzPWZ1bmN0aW9uKCl7aWYoX3RoaXM0Lm1vdW50ZWQpe190aGlzNC5zZXRTdGF0ZSh7c2VsZWN0ZWRFbnRpdHlJbmRleDotMSxlbnRpdHlNYXRjaEluZGV4ZXM6W119KTt9fTt0aGlzLmdldElucHV0Tm9kZT1mdW5jdGlvbigpe3JldHVybiBfdGhpczQucmVmcy5pbnB1dC5yZWZzLmZpZWxkO307dGhpcy5zZWxlY3Q9ZnVuY3Rpb24oKXt2YXIgaW5wdXQ9X3RoaXM0LmdldElucHV0Tm9kZSgpO2lucHV0LnNlbGVjdGlvblN0YXJ0PTA7aW5wdXQuc2VsZWN0aW9uRW5kPV90aGlzNC5nZXRWYWx1ZSgpLmxlbmd0aDt9O3RoaXMuZm9jdXM9ZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXM0LmdldElucHV0Tm9kZSgpLmZvY3VzKCk7fTt0aGlzLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIF90aGlzNC5yZWZzLmlucHV0LmdldFZhbHVlKCk7fTt0aGlzLnNldFZhbHVlPWZ1bmN0aW9uKCl7dmFyIHZhbHVlPWFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1swXTonJztfdGhpczQucmVmcy5pbnB1dC5zZXRWYWx1ZSh2YWx1ZSk7X3RoaXM0LnVwZGF0ZUlucHV0U3RhdGUodmFsdWUpO190aGlzNC5yZXNldE1hdGNoZXMoKTtfdGhpczQuZm9jdXMoKTt9O3RoaXMuc2V0VmFsdWVXaXRoU2VsZWN0ZWRFbnRpdHk9ZnVuY3Rpb24oKXtfdGhpczQucHJvcHMub25FbnRpdHlTZWxlY3RlZChfdGhpczQuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCk7aWYoX3RoaXM0LnByb3BzLmNsZWFyT25TZWxlY3Rpb24pe190aGlzNC5zZXRWYWx1ZSgnJyk7fWVsc2V7X3RoaXM0LnNldFZhbHVlKF90aGlzNC5nZXRTZWxlY3RlZEVudGl0eVRleHQoKSk7fXdpbmRvdy5zZXRUaW1lb3V0KF90aGlzNC5yZXNldE1hdGNoZXMsMCk7fTt0aGlzLm1hcmtNYXRjaFN1YnN0cmluZz1mdW5jdGlvbigpe3JldHVybiBfdGhpczQuZ2V0TWFya2luZ0Z1bmN0aW9uKCkuYXBwbHkodW5kZWZpbmVkLGFyZ3VtZW50cyk7fTt0aGlzLmdldE1hdGNoSW5kZXhlcz1mdW5jdGlvbigpe3JldHVybiBfdGhpczQuZ2V0TWF0Y2hpbmdGdW5jdGlvbigpLmFwcGx5KHVuZGVmaW5lZCxhcmd1bWVudHMpO307dGhpcy5oYW5kbGVDaGFuZ2U9ZnVuY3Rpb24oZXZlbnQpe2lmKF90aGlzNC5zdGF0ZS5pc0NvbnRyb2xsZWQ9PT1mYWxzZSl7X3RoaXM0LnVwZGF0ZUlucHV0U3RhdGUoZXZlbnQudGFyZ2V0LnZhbHVlKTtfdGhpczQuY29tcHV0ZU1hdGNoZXMoKTt9aWYoaXNGdW5jdGlvbihfdGhpczQucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZSkpe190aGlzNC5wcm9wcy5pbnB1dFByb3BzLm9uQ2hhbmdlKGV2ZW50KTt9fTt0aGlzLmhhbmRsZUtleURvd249ZnVuY3Rpb24oZXZlbnQpe3N3aXRjaChldmVudC5rZXkpe2Nhc2UnQXJyb3dMZWZ0JzppZihldmVudC50YXJnZXQuc2VsZWN0aW9uU3RhcnQ+MSl7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7fWJyZWFrO2Nhc2UnVGFiJzpjYXNlJ0Fycm93UmlnaHQnOmlmKF90aGlzNC5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4IT09LTEmJl90aGlzNC5jdXJzb3JBdEVuZE9mSW5wdXQoKSYmX3RoaXM0LmdldElucHV0Tm9kZSgpPT09ZXZlbnQudGFyZ2V0JiYhZXZlbnQuc2hpZnRLZXkpe2V2ZW50Lm5hdGl2ZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7X3RoaXM0LnNldFZhbHVlV2l0aFNlbGVjdGVkRW50aXR5KCk7fWJyZWFrO2Nhc2UnQXJyb3dVcCc6ZXZlbnQubmF0aXZlRXZlbnQucHJldmVudERlZmF1bHQoKTtfdGhpczQuc2VsZWN0TWF0Y2goLTEpO190aGlzNC5mb2N1cygpO2JyZWFrO2Nhc2UnQXJyb3dEb3duJzpldmVudC5uYXRpdmVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO190aGlzNC5zZWxlY3RNYXRjaCgxKTtfdGhpczQuZm9jdXMoKTticmVhaztjYXNlJ0VzY2FwZSc6aWYoX3RoaXM0LnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXghPT0tMSYmX3RoaXM0LmdldElucHV0Tm9kZSgpPT09ZXZlbnQudGFyZ2V0KXtfdGhpczQucmVzZXRNYXRjaGVzKCk7fWJyZWFrO2Nhc2UnRW50ZXInOmlmKF90aGlzNC5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4IT09LTEmJl90aGlzNC5nZXRJbnB1dE5vZGUoKT09PWV2ZW50LnRhcmdldCl7ZXZlbnQubmF0aXZlRXZlbnQucHJldmVudERlZmF1bHQoKTtfdGhpczQuc2V0VmFsdWVXaXRoU2VsZWN0ZWRFbnRpdHkoKTt9ZWxzZXtfdGhpczQucHJvcHMub25Db21wbGV0ZShfdGhpczQuc3RhdGUuaW5wdXQsZXZlbnQpO31icmVhazt9aWYoaXNGdW5jdGlvbihfdGhpczQucHJvcHMub25LZXlEb3duKSl7X3RoaXM0LnByb3BzLm9uS2V5RG93bihldmVudCk7fX07fTsvKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gVHlwZWFoZWFkO1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGluZGV4LmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbiBcdF9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNyk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgODNhMWU3ZjYxNDNiMWFhNzNlMGMiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJib3VuZGxlc3MtaW5wdXRcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wiY29tbW9uanMyXCI6XCJib3VuZGxlc3MtaW5wdXRcIn1cbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYm91bmRsZXNzLXV0aWxzLW9iamVjdC1pbnRlcnNlY3Rpb25cIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wiY29tbW9uanMyXCI6XCJib3VuZGxlc3MtdXRpbHMtb2JqZWN0LWludGVyc2VjdGlvblwifVxuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJib3VuZGxlc3MtdXRpbHMtb21pdC1rZXlzXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcImNvbW1vbmpzMlwiOlwiYm91bmRsZXNzLXV0aWxzLW9taXQta2V5c1wifVxuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJib3VuZGxlc3MtdXRpbHMtdXVpZFwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJjb21tb25qczJcIjpcImJvdW5kbGVzcy11dGlscy11dWlkXCJ9XG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNsYXNzbmFtZXNcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wiY29tbW9uanMyXCI6XCJjbGFzc25hbWVzXCJ9XG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImVzY2FwZS1zdHJpbmctcmVnZXhwXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcImNvbW1vbmpzMlwiOlwiZXNjYXBlLXN0cmluZy1yZWdleHBcIn1cbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVhY3RcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wiY29tbW9uanMyXCI6XCJyZWFjdFwifVxuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBlc2NhcGVyIGZyb20gJ2VzY2FwZS1zdHJpbmctcmVnZXhwJztcblxuaW1wb3J0IElucHV0IGZyb20gJ2JvdW5kbGVzcy1pbnB1dCc7XG5pbXBvcnQgZXh0cmFjdENoaWxkUHJvcHMgZnJvbSAnYm91bmRsZXNzLXV0aWxzLW9iamVjdC1pbnRlcnNlY3Rpb24nO1xuaW1wb3J0IG9taXQgZnJvbSAnYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cyc7XG5pbXBvcnQgdXVpZCBmcm9tICdib3VuZGxlc3MtdXRpbHMtdXVpZCc7XG5cbmNvbnN0IGlzRnVuY3Rpb24gPSAoeCkgPT4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG5jb25zdCBpc1N0cmluZyA9ICh4KSA9PiB0eXBlb2YgeCA9PT0gJ3N0cmluZyc7XG5jb25zdCBub29wID0gKCkgPT4ge307XG5cbi8qKlxuVHlwZWFoZWFkIGlzIGFuIGVuaGFuY2VtZW50IHVwb24gW0lucHV0XShodHRwczovL2dpdGh1Yi5jb20vZW5pZ21hLWlvL2JvdW5kbGVzcy90cmVlL21hc3Rlci9wYWNrYWdlcy9ib3VuZGxlc3MtaW5wdXQpIHdoaWNoIHByb3ZpZGVzIHR3byBidWlsdC1pbiBtYXRjaGluZyBhbGdvcml0aG1zIChcImZ1enp5XCIgXFxbZGVmYXVsdFxcXSBhbmQgXCJzdGFydHMtd2l0aFwiKSBhbmQgc3VwcG9ydHMgdGhlIHVzZSBvZiBjdXN0b20gbWF0Y2hpbmcgYW5kIG1hcmtpbmcgZnVuY3Rpb25zLlxuXG5JbiB0aGUgZXhhbXBsZXMgYmVsb3csIGltYWdpbmUgdGhlIGA8PmAgaW4gdGhlIFwibWFya3NcIiBzZWN0aW9uIGlzIGEgd3JhcHBpbmcgYDxtYXJrPmAgZWxlbWVudDpcblxuMS4gX19cIlN0YXJ0cy13aXRoXCIgbWF0Y2hpbmcgJiBtYXJraW5nX19cbiAgIGBgYGpzeFxuICAgPFR5cGVhaGVhZFxuICAgICAgIGFsZ29yaXRobT17VHlwZWFoZWFkLm1vZGUuU1RBUlRTX1dJVEh9XG4gICAgICAgZW50aXRpZXM9e1tcbiAgICAgICAgICAge3RleHQ6ICdhcHBsZSd9LFxuICAgICAgICAgICB7dGV4dDogJ2Fwcmljb3QnfSxcbiAgICAgICAgICAge3RleHQ6ICdncmFwZSd9LFxuICAgICAgIF19XG4gICAgICAgaW5wdXRQcm9wcz17e3ZhbHVlOiAnYSd9fSAvPlxuICAgYGBgXG5cbiAgICsgbWF0Y2hlczogYFwiYXBwbGVcIiwgXCJhcHJpY290XCJgXG4gICArIG1hcmtzOiBgXCI8YT5wcGxlXCIsIFwiPGE+cHJpY290XCJgXG5cbjEuIF9fXCJGdXp6eVwiIG1hdGNoaW5nICYgbWFya2luZ19fXG4gICBgYGBqc3hcbiAgIDxUeXBlYWhlYWRcbiAgICAgICBhbGdvcml0aG09e1R5cGVhaGVhZC5tb2RlLkZVWlpZfVxuICAgICAgIGVudGl0aWVzPXtbXG4gICAgICAgICAgIHt0ZXh0OiAnYXBwbGUnfSxcbiAgICAgICAgICAge3RleHQ6ICdhcHJpY290J30sXG4gICAgICAgICAgIHt0ZXh0OiAnZ3JhcGUnfSxcbiAgICAgICBdfVxuICAgICAgIGlucHV0UHJvcHM9e3t2YWx1ZTogJ2EnfX0gLz5cbiAgIGBgYFxuXG4gICArIG1hdGNoZXM6IGBcImFwcGxlXCIsIFwiYXByaWNvdFwiLCBcImdyYXBlXCJgXG4gICArIG1hcmtzOiBgXCI8YT5wcGxlXCIsIFwiPGE+cHJpY290XCIsIFwiZ3I8YT5wZVwiYFxuXG4xLiBfX0N1c3RvbSBtYXRjaGluZyAmIG1hcmtpbmdfX1xuXG4gICAgT3B0aW9uYWxseSwgeW91IGNhbiBwcm92aWRlIHlvdXIgb3duIGNvbWJpbmF0aW9uIG9mIG1hdGNoaW5nIGFuZCBtYXJraW5nIGZ1bmN0aW9ucy4gRm9yIGV4YW1wbGUsIGxvb3NlbmluZyB0aGUgbWF0Y2hpbmcgdG8gaW5jbHVkZSB1bmljb2RlIHZhcmlhbnRzIG9mIGNoYXJhY3RlcnMgY291bGQgYmUgdXNlZnVsLCBlLmcuIMOnICZyYXJyOyBjXG5cbiAgICBgYGBqc3hcbiAgICA8VHlwZWFoZWFkXG4gICAgICAgIGFsZ29yaXRobT17e1xuICAgICAgICAgICAgbWF0Y2hlcjogeW91ck1hdGNoRnVuYyxcbiAgICAgICAgICAgIG1hcmtlcjogeW91ck1hcmtGdW5jLFxuICAgICAgICB9fSAvPlxuICAgIGBgYFxuXG4jIyBDb21wb25lbnQgSW5zdGFuY2UgTWV0aG9kc1xuXG5XaGVuIHVzaW5nIGBUeXBlYWhlYWRgIGluIHlvdXIgcHJvamVjdCwgeW91IG1heSBjYWxsIHRoZSBmb2xsb3dpbmcgbWV0aG9kcyBvbiBhIHJlbmRlcmVkIGluc3RhbmNlIG9mIHRoZSBjb21wb25lbnQuIFVzZSBbYHJlZnNgXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3JlZnMtYW5kLXRoZS1kb20uaHRtbCkgdG8gZ2V0IHRoZSBpbnN0YW5jZS5cblxuLSBfX2Bmb2N1cygpYF9fXG4gIGZvY3VzZXMgdGhlIGJyb3dzZXIgb29uIHRoZSB1bmRlcmx5aW5nIHRleHR1YWwgaW5wdXQgZm9yIGltbWVkaWF0ZSB0ZXh0IGVudHJ5XG5cbi0gX19gZ2V0SW5wdXROb2RlKClgX19cbiAgcmV0dXJucyB0aGUgcmF3IHVuZGVybHlpbmcgdGV4dHVhbCBpbnB1dCBET00gbm9kZVxuXG4tIF9fYGdldFNlbGVjdGVkRW50aXR5VGV4dCgpYF9fXG4gIHJldHVybnMgdGhlIGB0ZXh0YCBwcm9wZXJ0eSBvZiB0aGUgY3VycmVudGx5IGhpZ2hsaWdodGVkIGVudGl0eSAoZnJvbSBgcHJvcHMuZW50aXRpZXNgKSwgb3IgcmV0dXJucyBhbiBlbXB0eSBzdHJpbmdcblxuLSBfX2BnZXRWYWx1ZSgpYF9fXG4gIHJldHJpZXZlcyB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdW5kZXJseWluZyB0ZXh0dWFsIGlucHV0XG5cbi0gX19gc2VsZWN0KClgX19cbiAgcHJvZ3JhbW1hdGljYWxseSBjcmVhdGVzIGEgZnVsbCBzZWxlY3Rpb24gb24gdGhlIHVuZGVybHlpbmcgdGV4dHVhbCBpbnB1dCBzdWNoIHRoYXQgYSBwcmVzcyBvZiB0aGUgQmFja3NwYWNlIGtleSB3b3VsZCBmdWxseSBjbGVhciB0aGUgaW5wdXRcblxuLSBfX2BzZXRWYWx1ZSh2YWx1ZTogc3RyaW5nKWBfX1xuICBzZXRzIHRoZSB1bmRlcmx5aW5nIHRleHR1YWwgaW5wdXQgdG8gdGhlIHNwZWNpZmllZCB0ZXh0IGFuZCB1cGRhdGVzIGludGVybmFsIHN0YXRlOyBkbyBub3QgdXNlIHRoaXMgbWV0aG9kIHdoZW4gdXNpbmcgYFR5cGVhaGVhZGAgYXMgYSBcImNvbnRyb2xsZWQgaW5wdXRcIlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUeXBlYWhlYWQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgbW9kZSA9IHtcbiAgICAgICAgJ1NUQVJUU19XSVRIJzogdXVpZCgpLFxuICAgICAgICAnRlVaWlknOiB1dWlkKCksXG4gICAgfVxuXG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLyoqIFR5cGVhaGVhZCBhY2NlcHRzIGFsbCBzdXBwb3J0ZWQgW0lucHV0IHByb3BzXShodHRwczovL2dpdGh1Yi5jb20vZW5pZ21hLWlvL2JvdW5kbGVzcy90cmVlL21hc3Rlci9wYWNrYWdlcy9ib3VuZGxlc3MtaW5wdXQpICovXG4gICAgICAgIC4uLklucHV0LnByb3BUeXBlcyxcblxuICAgICAgICAvKipcbiAgICAgICAgICAgIHRoZSBtZWNoYW5pc20gdXNlZCB0byBpZGVudGlmeSBhbmQgbWFyayBtYXRjaGluZyBzdWJzdHJpbmdzOyBhIGN1c3RvbSBzZXQgY2FuIGJlIHByb3ZpZGVkIGFzIGFuIG9iamVjdCAoc2VlIHRoZSBwcm9wZXJ0aWVzIGJlbG93KVxuICAgICAgICAgKi9cbiAgICAgICAgYWxnb3JpdGhtOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgIFByb3BUeXBlcy5vbmVPZihbXG4gICAgICAgICAgICAgICAgVHlwZWFoZWFkLm1vZGUuU1RBUlRTX1dJVEgsXG4gICAgICAgICAgICAgICAgVHlwZWFoZWFkLm1vZGUuRlVaWlksXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIGZvcm1hdCB3aWxsIGJlIHdoYXQgc2hvd3MgdXAgaW4gdGhlIHR5cGVhaGVhZCBkcm9wZG93biBsaXN0IChKU1ggYXJyYXlzIGFyZSBhY2NlcHRlZCwgdGhlIGNvbXBvbmVudCB3aWxsIHByb3ZpZGUgdGhlIHdyYXBwZXIpXG5cbiAgICAgICAgICAgICAgICAgICAgYW4gZXhhbXBsZSBtYXJraW5nIGZ1bmN0aW9uOlxuXG4gICAgICAgICAgICAgICAgICAgIGBgYGpzXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0c1dpdGhNYXJraW5nRnVuYyhpbnB1dFRleHQsIGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW50aXR5Q29udGVudCA9IGVudGl0eS50ZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vla1ZhbHVlID0gaW5wdXQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U3RhcnQgPSBlbnRpdHlDb250ZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWVrVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhFbmQgPSBpbmRleFN0YXJ0ICsgc2Vla1ZhbHVlLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBrZXk9J2JlZm9yZSc+e2VudGl0eUNvbnRlbnQuc2xpY2UoMCwgaW5kZXhTdGFydCl9PC9zcGFuPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bWFyayBrZXk9J21hcmsnPntlbnRpdHlDb250ZW50LnNsaWNlKGluZGV4U3RhcnQsIGluZGV4RW5kKX08L21hcms+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGtleT0nYWZ0ZXInPntlbnRpdHlDb250ZW50LnNsaWNlKGluZGV4RW5kKX08L3NwYW4+LFxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBgYGBcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBtYXJrZXI6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgICAgICAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgICAgICAgICAgICAgUHJvcFR5cGVzLm9uZU9mKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVhaGVhZC5tb2RlLlNUQVJUU19XSVRILFxuICAgICAgICAgICAgICAgICAgICAgICAgVHlwZWFoZWFkLm1vZGUuRlVaWlksXG4gICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIF0pLFxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIGZvcm1hdCBkZXRlcm1pbmVzIHdoaWNoIGVudGl0aWVzIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBtYXJraW5nIGZ1bmN0aW9uXG5cbiAgICAgICAgICAgICAgICAgICAgYW4gZXhhbXBsZSBtYXRjaGluZyBmdW5jdGlvbjpcblxuICAgICAgICAgICAgICAgICAgICBgYGBqc1xuICAgICAgICAgICAgICAgICAgICBzdGFydHNXaXRoTWF0Y2hpbmdGdW5jKGlucHV0VGV4dCwgZW50aXRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlZWtWYWx1ZSA9IHVzZXJUZXh0LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdGllcy5yZWR1Y2UoZnVuY3Rpb24gc2Vla01hdGNoKHJlc3VsdHMsIGVudGl0eSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXR5LnRleHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlZWtWYWx1ZSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBgYGBcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBtYXRjaGVyOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgICAgICAgICAgICAgICAgUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgICAgICAgICAgICAgIFByb3BUeXBlcy5vbmVPZihbXG4gICAgICAgICAgICAgICAgICAgICAgICBUeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVhaGVhZC5tb2RlLkZVWlpZLFxuICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICBdKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogaWYgYHRydWVgLCBjbGVhcnMgdGhlIGlucHV0IHRleHQgd2hlbiBhIChwYXJ0aWFsKSBtYXRjaCBpcyBzZWxlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXJPblNlbGVjdGlvbjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFuIGFycmF5IG9mIG9iamVjdHMgdGhhdCB1c2VyIGlucHV0IGlzIGZpbHRlcmVkIGFnYWluc3Q7IGF0IGEgbWluaW11bSwgZWFjaCBvYmplY3QgbXVzdCBoYXZlIGEgYHRleHRgIHByb3BlcnR5IGFuZCBhbnkgb3RoZXIgc3VwcGxpZWQgcHJvcGVydHkgaXMgcGFzc2VkIHRocm91Z2ggdG8gdGhlIHJlc3VsdGluZyBET00gZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgZW50aXRpZXM6IFByb3BUeXBlcy5hcnJheU9mKFxuICAgICAgICAgICAgUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiB0aGUgdGV4dCB0byBiZSB1c2VkIHRvIGRvIHN0cmluZyBjb21wYXJpc29uIGFuZCBtYXRjaCBhZ2FpbnN0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdGV4dDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmVuZGVycyBhIGRpc2FibGVkIHRleHRmaWVsZCB3aXRoIHRoZSBmdWxsIHRleHQgb2YgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBpbnB1dCBoaW50OyB3aWxsIHJlbWFpbiBibGFuayBpZiB0aGUgbWF0Y2hlZCBzdWJzdHJpbmcgaXMgbm90IGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHVzZXIgaW5wdXRcbiAgICAgICAgICovXG4gICAgICAgIGhpbnQ6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgIGhpbnRQcm9wczogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogYW55IFtSZWFjdC1zdXBwb3J0ZWQgYXR0cmlidXRlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RhZ3MtYW5kLWF0dHJpYnV0ZXMuaHRtbCNodG1sLWF0dHJpYnV0ZXMpXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICcqJzogUHJvcFR5cGVzLmFueSxcbiAgICAgICAgfSksXG5cbiAgICAgICAgbWF0Y2hXcmFwcGVyUHJvcHM6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIGFueSBbUmVhY3Qtc3VwcG9ydGVkIGF0dHJpYnV0ZV0oaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy90YWdzLWFuZC1hdHRyaWJ1dGVzLmh0bWwjaHRtbC1hdHRyaWJ1dGVzKVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICAnKic6IFByb3BUeXBlcy5hbnksXG4gICAgICAgIH0pLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgXCJvZmZzY3JlZW5cIiBjbGFzcyB1c2VkIGJ5IHlvdXIgYXBwbGljYXRpb247IHNwZWNpZmljYWxseSB0byByZXRhaW4gW0FSSUEgbmF2aWdhYmlsaXR5XShodHRwOi8vc25vb2suY2EvYXJjaGl2ZXMvaHRtbF9hbmRfY3NzL2hpZGluZy1jb250ZW50LWZvci1hY2Nlc3NpYmlsaXR5KSBhcyBgZGlzcGxheTogbm9uZWAgZXhjbHVkZXMgdGhlIGVsZW1lbnQgZnJvbSBjb25zaWRlcmF0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBvZmZzY3JlZW5DbGFzczogUHJvcFR5cGVzLnN0cmluZyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2FsbGVkIHdoZW4gdGhlIHVzZXIgcHJlc3NlcyBgRW50ZXJgIHdpdGggbm8gYXV0b3N1Z2dlc3QgaGludCBhdmFpbGFibGUsIGluZGljYXRpbmcgdGhhdCBpbnB1dCBpcyBjb21wbGV0ZVxuICAgICAgICAgKi9cbiAgICAgICAgb25Db21wbGV0ZTogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNhbGxlZCB3aXRoIHRoZSBpbmRleCBvZiB0aGUgaGlnaGxpZ2h0ZWQgZW50aXR5IGR1ZSB0byBrZXlib2FyZCBzZWxlY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIG9uRW50aXR5SGlnaGxpZ2h0ZWQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2l0aCB0aGUgaW5kZXggb2YgdGhlIGVudGl0eSBzZWxlY3RlZCBieSB0aGUgdXNlclxuICAgICAgICAgKi9cbiAgICAgICAgb25FbnRpdHlTZWxlY3RlZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgLi4uSW5wdXQuZGVmYXVsdFByb3BzLFxuICAgICAgICBhbGdvcml0aG06IFR5cGVhaGVhZC5tb2RlLkZVWlpZLFxuICAgICAgICBjbGVhck9uU2VsZWN0aW9uOiBmYWxzZSxcbiAgICAgICAgZW50aXRpZXM6IFtdLFxuICAgICAgICBoaW50OiBudWxsLFxuICAgICAgICBoaW50UHJvcHM6IHt9LFxuICAgICAgICBtYXRjaFdyYXBwZXJQcm9wczoge30sXG4gICAgICAgIG9mZnNjcmVlbkNsYXNzOiAnYi1vZmZzY3JlZW4nLFxuICAgICAgICBvbkNvbXBsZXRlOiBub29wLFxuICAgICAgICBvbkVudGl0eUhpZ2hsaWdodGVkOiBub29wLFxuICAgICAgICBvbkVudGl0eVNlbGVjdGVkOiBub29wLFxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcm5hbEtleXMgPSBPYmplY3Qua2V5cyhUeXBlYWhlYWQuZGVmYXVsdFByb3BzKVxuXG4gICAgc3RhdGUgPSB7XG4gICAgICAgIGVudGl0eU1hdGNoSW5kZXhlczogW10sXG4gICAgICAgIGlkOiB1dWlkKCksXG4gICAgICAgIGlzQ29udHJvbGxlZDogaXNTdHJpbmcodGhpcy5wcm9wcy5pbnB1dFByb3BzLnZhbHVlKSxcbiAgICAgICAgaW5wdXQ6IHRoaXMucHJvcHMuaW5wdXRQcm9wcy52YWx1ZVxuICAgICAgICAgICAgICAgfHwgdGhpcy5wcm9wcy5pbnB1dFByb3BzLmRlZmF1bHRWYWx1ZVxuICAgICAgICAgICAgICAgfHwgJycsXG4gICAgICAgIHNlbGVjdGVkRW50aXR5SW5kZXg6IC0xLFxuICAgIH1cblxuICAgIG1vdW50ZWQgPSBmYWxzZVxuXG4gICAgdXBkYXRlSW5wdXRTdGF0ZSA9ICh2YWx1ZSA9ICcnKSA9PiB0aGlzLnNldFN0YXRlKHtpbnB1dDogdmFsdWV9KVxuXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5pbnB1dFByb3BzLnZhbHVlIHx8IHRoaXMucHJvcHMuaW5wdXRQcm9wcy5kZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hdGNoZXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkVudGl0eUhpZ2hsaWdodGVkKHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgICBpZiAobmV4dFByb3BzLmVudGl0aWVzICE9PSB0aGlzLnByb3BzLmVudGl0aWVzKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVNYXRjaGVzKG5leHRQcm9wcy5lbnRpdGllcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV4dFByb3BzLmlucHV0UHJvcHMudmFsdWUgIT09IHRoaXMucHJvcHMuaW5wdXRQcm9wcy52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dFN0YXRlKG5leHRQcm9wcy5pbnB1dFByb3BzLnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hdGNoZXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5lbnRpdHlNYXRjaEluZGV4ZXMubGVuZ3RoICYmICFwcmV2U3RhdGUuZW50aXR5TWF0Y2hJbmRleGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5yZWZzLm1hdGNoZXMuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgfSAvLyBmaXggYW4gb2RkIGJ1ZyBpbiBGRiB3aGVyZSBpdCBpbml0aWFsaXplcyB0aGUgZWxlbWVudCB3aXRoIGFuIGluY29ycmVjdCBzY3JvbGxUb3BcblxuICAgICAgICBpZiAoICAgdGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4ID49IDBcbiAgICAgICAgICAgICYmIHRoaXMucHJvcHMuZW50aXRpZXNbdGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4XSAhPT0gcHJldlByb3BzLmVudGl0aWVzW3ByZXZTdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4XSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkVudGl0eUhpZ2hsaWdodGVkKHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLnByb3BzLmVudGl0aWVzW3RoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleF07XG5cbiAgICAgICAgcmV0dXJuIGVudGl0eSA/IGVudGl0eS50ZXh0IDogJyc7XG4gICAgfVxuXG4gICAgaGFuZGxlTWF0Y2hDbGljayhpbmRleCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZEVudGl0eUluZGV4OiBpbmRleH0sIHRoaXMuc2V0VmFsdWVXaXRoU2VsZWN0ZWRFbnRpdHkpO1xuICAgIH1cblxuICAgIHNlbGVjdE1hdGNoKGRlbHRhKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSB0aGlzLnN0YXRlLmVudGl0eU1hdGNoSW5kZXhlcztcbiAgICAgICAgY29uc3QgdG90YWxNYXRjaGVzID0gbWF0Y2hlcy5sZW5ndGg7XG4gICAgICAgIGxldCBuZXh0SW5kZXggPSBtYXRjaGVzLmluZGV4T2YodGhpcy5zdGF0ZS5zZWxlY3RlZEVudGl0eUluZGV4KSArIGRlbHRhO1xuXG4gICAgICAgIGlmICh0b3RhbE1hdGNoZXMpIHtcbiAgICAgICAgICAgIGlmIChuZXh0SW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgbmV4dEluZGV4ID0gdG90YWxNYXRjaGVzIC0gMTsgLy8gcmV2ZXJzZSBsb29wXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5leHRJbmRleCA+PSB0b3RhbE1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICBuZXh0SW5kZXggPSAwOyAvLyBsb29wXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG1hdGNoSW5kZXggPSBtYXRjaGVzW25leHRJbmRleF07XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVzTm9kZSA9IHRoaXMucmVmcy5tYXRjaGVzO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlc05vZGVZRW5kID0gbWF0Y2hlc05vZGUuc2Nyb2xsVG9wICsgbWF0Y2hlc05vZGUuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hOb2RlID0gdGhpcy5yZWZzW2BtYXRjaF8kJHttYXRjaEluZGV4fWBdO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hOb2RlWVN0YXJ0ID0gbWF0Y2hOb2RlLm9mZnNldFRvcDtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoTm9kZVlFbmQgPSBtYXRjaE5vZGVZU3RhcnQgKyBtYXRjaE5vZGUuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgICAgICAvLyBicmluZyBpbnRvIHZpZXcgaWYgbmVjZXNzYXJ5XG4gICAgICAgICAgICBpZiAobWF0Y2hOb2RlWUVuZCA+PSBtYXRjaGVzTm9kZVlFbmQpIHsgLy8gYmVsb3dcbiAgICAgICAgICAgICAgICBtYXRjaGVzTm9kZS5zY3JvbGxUb3AgKz0gbWF0Y2hOb2RlWUVuZCAtIG1hdGNoZXNOb2RlWUVuZDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hOb2RlWVN0YXJ0IDw9IG1hdGNoZXNOb2RlLnNjcm9sbFRvcCkgeyAvLyBhYm92ZVxuICAgICAgICAgICAgICAgIG1hdGNoZXNOb2RlLnNjcm9sbFRvcCA9IG1hdGNoTm9kZVlTdGFydDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRFbnRpdHlJbmRleDogbWF0Y2hJbmRleH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXRNYXRjaGVzID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5tb3VudGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEVudGl0eUluZGV4OiAtMSxcbiAgICAgICAgICAgICAgICBlbnRpdHlNYXRjaEluZGV4ZXM6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRJbnB1dE5vZGUgPSAoKSA9PiB0aGlzLnJlZnMuaW5wdXQucmVmcy5maWVsZFxuXG4gICAgc2VsZWN0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHRoaXMuZ2V0SW5wdXROb2RlKCk7XG5cbiAgICAgICAgaW5wdXQuc2VsZWN0aW9uU3RhcnQgPSAwO1xuICAgICAgICBpbnB1dC5zZWxlY3Rpb25FbmQgPSB0aGlzLmdldFZhbHVlKCkubGVuZ3RoO1xuICAgIH1cblxuICAgIGZvY3VzID0gKCkgPT4gdGhpcy5nZXRJbnB1dE5vZGUoKS5mb2N1cygpXG4gICAgZ2V0VmFsdWUgPSAoKSA9PiB0aGlzLnJlZnMuaW5wdXQuZ2V0VmFsdWUoKVxuXG4gICAgc2V0VmFsdWUgPSAodmFsdWUgPSAnJykgPT4ge1xuICAgICAgICB0aGlzLnJlZnMuaW5wdXQuc2V0VmFsdWUodmFsdWUpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlSW5wdXRTdGF0ZSh2YWx1ZSk7XG4gICAgICAgIHRoaXMucmVzZXRNYXRjaGVzKCk7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBjdXJzb3JBdEVuZE9mSW5wdXQoKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmdldElucHV0Tm9kZSgpO1xuXG4gICAgICAgIHJldHVybiAgICBub2RlLnNlbGVjdGlvblN0YXJ0ID09PSBub2RlLnNlbGVjdGlvbkVuZFxuICAgICAgICAgICAgICAgJiYgbm9kZS5zZWxlY3Rpb25FbmQgPT09IHRoaXMuZ2V0VmFsdWUoKS5sZW5ndGg7XG4gICAgfVxuXG4gICAgc2V0VmFsdWVXaXRoU2VsZWN0ZWRFbnRpdHkgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMucHJvcHMub25FbnRpdHlTZWxlY3RlZCh0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXgpO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNsZWFyT25TZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUoJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLmdldFNlbGVjdGVkRW50aXR5VGV4dCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5lZWRzIHRvIGhhcHBlbiBhZnRlciB0aGUgdXBjb21pbmcgcmVuZGVyIHRoYXQgd2lsbCBiZSB0cmlnZ2VyZWQgYnkgYHNldFZhbHVlYFxuICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh0aGlzLnJlc2V0TWF0Y2hlcywgMCk7XG4gICAgfVxuXG4gICAgbWFya0Z1enp5TWF0Y2hTdWJzdHJpbmcoaW5wdXQsIGVudGl0eSkge1xuICAgICAgICBjb25zdCBlbnRpdHlDb250ZW50ID0gZW50aXR5LnRleHQ7XG4gICAgICAgIGNvbnN0IGZyYWdzID0gZW50aXR5Q29udGVudC5zcGxpdChuZXcgUmVnRXhwKCcoJyArIGVzY2FwZXIoaW5wdXQpICsgJyknLCAnaWcnKSk7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRVc2VyVGV4dCA9IGlucHV0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IHRocmVzaG9sZCA9IGZyYWdzLmxlbmd0aDtcbiAgICAgICAgbGV0IGkgPSAtMTtcblxuICAgICAgICB3aGlsZSAoKytpIDwgdGhyZXNob2xkKSB7XG4gICAgICAgICAgICBpZiAoZnJhZ3NbaV0udG9Mb3dlckNhc2UoKSA9PT0gbm9ybWFsaXplZFVzZXJUZXh0KSB7XG4gICAgICAgICAgICAgICAgZnJhZ3NbaV0gPSA8bWFyayBrZXk9e2l9IGNsYXNzTmFtZT0nYi10eXBlYWhlYWQtbWF0Y2gtaGlnaGxpZ2h0Jz57ZnJhZ3NbaV19PC9tYXJrPjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmcmFncztcbiAgICB9XG5cbiAgICBtYXJrU3RhcnRzV2l0aE1hdGNoU3Vic3RyaW5nKGlucHV0LCBlbnRpdHkpIHtcbiAgICAgICAgY29uc3QgZW50aXR5Q29udGVudCA9IGVudGl0eS50ZXh0O1xuICAgICAgICBjb25zdCBzZWVrVmFsdWUgPSBpbnB1dC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBpbmRleFN0YXJ0ID0gZW50aXR5Q29udGVudC50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2Vla1ZhbHVlKTtcbiAgICAgICAgY29uc3QgaW5kZXhFbmQgPSBpbmRleFN0YXJ0ICsgc2Vla1ZhbHVlLmxlbmd0aDtcblxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgPHNwYW4ga2V5PScwJz57ZW50aXR5Q29udGVudC5zbGljZSgwLCBpbmRleFN0YXJ0KX08L3NwYW4+LFxuICAgICAgICAgICAgPG1hcmsga2V5PScxJyBjbGFzc05hbWU9J2ItdHlwZWFoZWFkLW1hdGNoLWhpZ2hsaWdodCc+e2VudGl0eUNvbnRlbnQuc2xpY2UoaW5kZXhTdGFydCwgaW5kZXhFbmQpfTwvbWFyaz4sXG4gICAgICAgICAgICA8c3BhbiBrZXk9JzInPntlbnRpdHlDb250ZW50LnNsaWNlKGluZGV4RW5kKX08L3NwYW4+LFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIGdldE1hcmtpbmdGdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGlzU3RyaW5nKHRoaXMucHJvcHMuYWxnb3JpdGhtKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuYWxnb3JpdGhtID09PSBUeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcmtTdGFydHNXaXRoTWF0Y2hTdWJzdHJpbmc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcmtGdXp6eU1hdGNoU3Vic3RyaW5nO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmFsZ29yaXRobS5tYXJrZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5hbGdvcml0aG0ubWFya2VyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMud2FybmVkTWFya2VyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMud2FybmVkTWFya2VyID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVHlwZWFoZWFkOiBubyBgcHJvcHMuYWxnb3JpdGhtLm1hcmtlcmAgd2FzIHByb3ZpZGVkOyBmYWxsaW5nIGJhY2sgdG8gdGhlIGRlZmF1bHQgbWFya2luZyBhbGdvcml0aG0gKEZVWlpZKS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLm1hcmtGdXp6eU1hdGNoU3Vic3RyaW5nO1xuICAgIH1cblxuICAgIG1hcmtNYXRjaFN1YnN0cmluZyA9ICguLi5hcmdzKSA9PiB0aGlzLmdldE1hcmtpbmdGdW5jdGlvbigpKC4uLmFyZ3MpXG5cbiAgICBnZXRGdXp6eU1hdGNoSW5kZXhlcyh1c2VyVGV4dCwgZW50aXRpZXMpIHtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHVzZXJUZXh0LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgcmV0dXJuIGVudGl0aWVzLnJlZHVjZShmdW5jdGlvbiBmaW5kSW5kZXhlcyhyZXN1bHQsIGVudGl0eSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiAgIGVudGl0eS50ZXh0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihub3JtYWxpemVkKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICA/IChyZXN1bHQucHVzaChpbmRleCkgJiYgcmVzdWx0KVxuICAgICAgICAgICAgICAgICAgIDogcmVzdWx0O1xuICAgICAgICB9LCBbXSk7XG4gICAgfVxuXG4gICAgZ2V0U3RhcnRzV2l0aE1hdGNoSW5kZXhlcyh1c2VyVGV4dCwgZW50aXRpZXMpIHtcbiAgICAgICAgY29uc3Qgc2Vla1ZhbHVlID0gdXNlclRleHQudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICByZXR1cm4gZW50aXRpZXMucmVkdWNlKGZ1bmN0aW9uIHNlZWtNYXRjaChyZXN1bHRzLCBlbnRpdHksIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoZW50aXR5LnRleHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlZWtWYWx1ZSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcblxuICAgICAgICB9LCBbXSk7XG4gICAgfVxuXG4gICAgZ2V0TWF0Y2hpbmdGdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGlzU3RyaW5nKHRoaXMucHJvcHMuYWxnb3JpdGhtKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuYWxnb3JpdGhtID09PSBUeXBlYWhlYWQubW9kZS5TVEFSVFNfV0lUSCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN0YXJ0c1dpdGhNYXRjaEluZGV4ZXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZ1enp5TWF0Y2hJbmRleGVzO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLmFsZ29yaXRobS5tYXRjaGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuYWxnb3JpdGhtLm1hdGNoZXI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy53YXJuZWRNYXRjaGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMud2FybmVkTWF0Y2hlciA9IHRydWU7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1R5cGVhaGVhZDogbm8gYHByb3BzLmFsZ29yaXRobS5tYXRjaGVyYCB3YXMgcHJvdmlkZWQ7IGZhbGxpbmcgYmFjayB0byB0aGUgZGVmYXVsdCBtYXRjaGluZyBhbGdvcml0aG0gKEZVWlpZKS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZ1enp5TWF0Y2hJbmRleGVzO1xuICAgIH1cblxuICAgIGdldE1hdGNoSW5kZXhlcyA9ICguLi5hcmdzKSA9PiB0aGlzLmdldE1hdGNoaW5nRnVuY3Rpb24oKSguLi5hcmdzKVxuXG4gICAgY29tcHV0ZU1hdGNoZXMocHJvdmlkZWRFbnRpdGllcykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKChzdGF0ZSwgcHJvcHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVudGl0aWVzID0gcHJvdmlkZWRFbnRpdGllcyB8fCBwcm9wcy5lbnRpdGllcztcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHN0YXRlLmlucHV0O1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGN1cnJlbnRWYWx1ZSA9PT0gJycgPyBbXSA6IHRoaXMuZ2V0TWF0Y2hJbmRleGVzKGN1cnJlbnRWYWx1ZSwgZW50aXRpZXMpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkRW50aXR5SW5kZXg6IG1hdGNoZXMubGVuZ3RoID8gbWF0Y2hlc1swXSA6IC0xLFxuICAgICAgICAgICAgICAgIGVudGl0eU1hdGNoSW5kZXhlczogbWF0Y2hlcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0NvbnRyb2xsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUlucHV0U3RhdGUoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hdGNoZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZSkpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNoYW5nZShldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LnNlbGVjdGlvblN0YXJ0ID4gMSkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdUYWInOlxuICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcbiAgICAgICAgICAgIGlmICggICB0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXggIT09IC0xXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5jdXJzb3JBdEVuZE9mSW5wdXQoKVxuICAgICAgICAgICAgICAgICYmIHRoaXMuZ2V0SW5wdXROb2RlKCkgPT09IGV2ZW50LnRhcmdldFxuICAgICAgICAgICAgICAgICYmICFldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIGV2ZW50Lm5hdGl2ZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZVdpdGhTZWxlY3RlZEVudGl0eSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdBcnJvd1VwJzpcbiAgICAgICAgICAgIGV2ZW50Lm5hdGl2ZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIGJsb2NrIGN1cnNvciBtb3ZlbWVudFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNYXRjaCgtMSk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgICAgZXZlbnQubmF0aXZlRXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gYmxvY2sgY3Vyc29yIG1vdmVtZW50XG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1hdGNoKDEpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnRXNjYXBlJzpcbiAgICAgICAgICAgIGlmICggICB0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXggIT09IC0xXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5nZXRJbnB1dE5vZGUoKSA9PT0gZXZlbnQudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldE1hdGNoZXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICAgICAgaWYgKCAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRFbnRpdHlJbmRleCAhPT0gLTFcbiAgICAgICAgICAgICAgICAmJiB0aGlzLmdldElucHV0Tm9kZSgpID09PSBldmVudC50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICBldmVudC5uYXRpdmVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVXaXRoU2VsZWN0ZWRFbnRpdHkoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNvbXBsZXRlKHRoaXMuc3RhdGUuaW5wdXQsIGV2ZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLm9uS2V5RG93bikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlck5vdGlmaWNhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICByZWY9J2FyaWEnXG4gICAgICAgICAgICAgICAgaWQ9e3RoaXMuc3RhdGUuaWR9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLnByb3BzLm9mZnNjcmVlbkNsYXNzfVxuICAgICAgICAgICAgICAgIGFyaWEtbGl2ZT0ncG9saXRlJ1xuICAgICAgICAgICAgICAgIHJvbGU9J3N0YXR1cyc+XG4gICAgICAgICAgICAgICAge3RoaXMuZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0KCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJIaW50KCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5oaW50KSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyVGV4dCA9IHRoaXMuc3RhdGUuaW5wdXQ7XG4gICAgICAgICAgICBjb25zdCByYXcgPSB0aGlzLmdldFNlbGVjdGVkRW50aXR5VGV4dCgpO1xuICAgICAgICAgICAgbGV0IHByb2Nlc3NlZCA9ICcnO1xuXG4gICAgICAgICAgICBpZiAoICAgcmF3XG4gICAgICAgICAgICAgICAgJiYgcmF3LnRvTG93ZXJDYXNlKCkuaW5kZXhPZih1c2VyVGV4dC50b0xvd2VyQ2FzZSgpKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHJhdy5yZXBsYWNlKG5ldyBSZWdFeHAodXNlclRleHQsICdpJyksIHVzZXJUZXh0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLmhpbnRQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdoaW50J1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ItaW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ItaW5wdXQtcGxhY2Vob2xkZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ItdHlwZWFoZWFkLWhpbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oaW50UHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD0nLTEnPlxuICAgICAgICAgICAgICAgICAgICB7cHJvY2Vzc2VkfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlck1hdGNoZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmVudGl0eU1hdGNoSW5kZXhlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcy5tYXRjaFdyYXBwZXJQcm9wcztcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgICAgICAgICAgcmVmPSdtYXRjaGVzJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KCdiLXR5cGVhaGVhZC1tYXRjaC13cmFwcGVyJywgcHJvcHMuY2xhc3NOYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgcm9sZT0nbGlzdGJveCc+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmVudGl0eU1hdGNoSW5kZXhlcy5tYXAoKGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLnByb3BzLmVudGl0aWVzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHtjbGFzc05hbWUsIHRleHQsIC4uLnJlc3R9ID0gZW50aXR5O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGluZyB0aGUgZm9jdXMgYW5kIGNsaWNrIHN0YXRlcyBlbHNld2hlcmUsIHNvIHRoZSBhMTF5IGVycm9yc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXJlIG5vdCByZWxldmFudCBpbiB0aGlzIGNhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17YG1hdGNoXyQke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItdHlwZWFoZWFkLW1hdGNoJywgY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYi10eXBlYWhlYWQtbWF0Y2gtc2VsZWN0ZWQnOiB0aGlzLnN0YXRlLnNlbGVjdGVkRW50aXR5SW5kZXggPT09IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt0ZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZU1hdGNoQ2xpY2suYmluZCh0aGlzLCBpbmRleCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J29wdGlvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLm1hcmtNYXRjaFN1YnN0cmluZyh0aGlzLnN0YXRlLmlucHV0LCBlbnRpdHkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7cHJvcHMsIHN0YXRlfSA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICB7Li4ub21pdChwcm9wcywgVHlwZWFoZWFkLmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgcmVmPSd3cmFwcGVyJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItdHlwZWFoZWFkLXdyYXBwZXInLCBwcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5oYW5kbGVLZXlEb3dufT5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJOb3RpZmljYXRpb24oKX1cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJIaW50KCl9XG5cbiAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgey4uLmV4dHJhY3RDaGlsZFByb3BzKHByb3BzLCBJbnB1dC5kZWZhdWx0UHJvcHMpfVxuICAgICAgICAgICAgICAgICAgICByZWY9J2lucHV0J1xuICAgICAgICAgICAgICAgICAgICBhcmlhLWNvbnRyb2xzPXtzdGF0ZS5pZH1cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRQcm9wcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvcHMuaW5wdXRQcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY3goJ2ItdHlwZWFoZWFkJywgcHJvcHMuaW5wdXRQcm9wcy5jbGFzc05hbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQ2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICB9fSAvPlxuXG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyTWF0Y2hlcygpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vcGFja2FnZXMvYm91bmRsZXNzLXR5cGVhaGVhZC9pbmRleC5qcyJdLCJzb3VyY2VSb290IjoiIn0=