module.exports=function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t){e.exports=require("boundless-typeahead")},function(e,t){e.exports=require("boundless-utils-object-intersection")},function(e,t){e.exports=require("boundless-utils-omit-keys")},function(e,t){e.exports=require("classnames")},function(e,t){e.exports=require("react")},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),l=(n.n(i),n(3)),p=n.n(l),c=n(0),u=n.n(c),a=n(1),f=n.n(a),h=n(2),d=n.n(h),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),v=function(e){return e[0]},b=function(e){return e[e.length-1]},T=function(e){return"function"==typeof e},m=function(e){function t(){var e,n,s,i;o(this,t);for(var l=arguments.length,p=Array(l),c=0;c<l;c++)p[c]=arguments[c];return n=s=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),s.focus=function(){return s.refs.typeahead.focus()},s.getInputNode=function(){return s.refs.typeahead.getInputNode()},s.getSelectedEntityText=function(){return s.refs.typeahead.getSelectedEntityText()},s.getValue=function(){return s.refs.typeahead.getValue()},s.select=function(){return s.refs.typeahead.select()},s.setValue=function(e){return s.refs.typeahead.setValue(e)},s.add=function(e){s.props.tokens.indexOf(e)===-1&&s.props.handleAddToken(e)},s.handleInputClick=function(e){s.clearSelection(),T(s.props.inputProps.onClick)&&s.props.inputProps.onClick(e)},s.handleInputFocus=function(e){s.clearSelection(),T(s.props.inputProps.onFocus)&&s.props.inputProps.onFocus(e)},s.handleKeyDown=function(e){switch(e.which){case 37:s.selectPreviousToken(e.shiftKey);break;case 39:s.selectNextToken(e.shiftKey);break;case 8:s.props.tokensSelected.length&&(s.remove(s.props.tokensSelected),s.focus());break;case 65:e.metaKey&&(e.preventDefault(),s.focus(),s.select(),s._suppressNextTokenSelection=!0,s.props.handleNewSelection(s.props.tokens))}T(s.props.onKeyDown)&&s.props.onKeyDown(e)},i=n,r(s,i)}return s(t,e),y(t,[{key:"componentDidUpdate",value:function(e){var t=e.tokensSelected,n=this.props.tokensSelected;if(this.props.tokens.length>e.tokens.length&&this.setValue(""),this._suppressNextTokenSelection)return void(this._suppressNextTokenSelection=!1);if(t!==n&&0!==n.length){if(1===n.length||n[0]!==t[0])return this.refs["token_"+n[0]].focus();if(b(n)!==b(t))return this.refs["token_"+b(n)].focus();this.refs["token_"+n[0]].focus()}}},{key:"remove",value:function(e){var t=this,n=(Array.isArray(e)?e:[e]).filter(function(e){return t.props.tokens.indexOf(e)!==-1});n.length&&this.props.handleRemoveTokens(n)}},{key:"selectToken",value:function(e){this.props.handleNewSelection([e])}},{key:"selectTokens",value:function(e){this.props.handleNewSelection(e)}},{key:"selectPreviousToken",value:function(e){var t=this.props.tokensSelected,n=this.props.tokens;if(1!==t.length||v(t)!==v(n))if(0===t.length)this.selectToken(b(n));else{var o=n[n.indexOf(v(t))-1];this.selectTokens(e?[o].concat(t):[o])}}},{key:"selectNextToken",value:function(e){var t=this.props.tokensSelected,n=this.props.tokens;if(0!==t.length)if(b(t)===b(n))this.clearSelection(),this.focus();else{var o=n[n.indexOf(b(t))+1];this.selectTokens(e?t.concat(o):[o])}}},{key:"clearSelection",value:function(){this.props.handleNewSelection([])}},{key:"handleTokenCloseClick",value:function(e,t){t.stopPropagation(),this.remove(e),this.focus(),this.props.tokenCloseComponent.props.onClick&&this.props.tokenCloseComponent.props.onClick(t)}},{key:"renderTokenClose",value:function(e){if(this.props.tokenCloseVisible)return n.i(i.cloneElement)(this.props.tokenCloseComponent,{className:p()("b-tokenfield-token-close",this.props.tokenCloseComponent.props.className),onClick:this.handleTokenCloseClick.bind(this,e)})}},{key:"handleTokenKeyDown",value:function(e,t){switch(t.which){case 13:case 32:this.selectToken(e),t.preventDefault();break;case 8:this.remove(e),this.focus(),t.preventDefault()}}},{key:"renderTokens",value:function(){var e=this;return n.i(i.createElement)("div",{className:"b-tokenfield-tokens",role:"listbox"},this.props.tokens.map(function(t){return n.i(i.createElement)("div",{ref:"token_"+t,key:t,className:p()("b-tokenfield-token",{"b-tokenfield-token-selected":e.props.tokensSelected.indexOf(t)!==-1}),onClick:e.selectToken.bind(e,t),onKeyDown:e.handleTokenKeyDown.bind(e,t),role:"option",tabIndex:"0"},e.props.entities[t].text,e.renderTokenClose(t))}))}},{key:"render",value:function(){return n.i(i.createElement)("div",k({},d()(this.props,t.internalKeys),{ref:"wrapper",className:p()("b-tokenfield-wrapper",this.props.className),onKeyDown:this.handleKeyDown}),this.renderTokens(),n.i(i.createElement)(u.a,k({},f()(this.props,u.a.defaultProps),{ref:"typeahead",className:"b-tokenfield",clearOnSelection:!0,inputProps:k({},this.props.inputProps,{onClick:this.handleInputClick,onFocus:this.handleInputFocus}),onEntitySelected:this.add})))}}]),t}(i.PureComponent);m.propTypes=k({},u.a.propTypes,{handleAddToken:i.PropTypes.func,handleRemoveTokens:i.PropTypes.func,handleNewSelection:i.PropTypes.func,tokenCloseComponent:i.PropTypes.element,tokenCloseVisible:i.PropTypes.bool,tokens:i.PropTypes.arrayOf(i.PropTypes.number),tokensSelected:i.PropTypes.arrayOf(i.PropTypes.number)}),m.defaultProps=k({},u.a.defaultProps,{handleAddToken:function(){},handleRemoveTokens:function(){},handleNewSelection:function(){},tokenCloseComponent:n.i(i.createElement)("div",null,"X"),tokenCloseVisible:!0,tokens:[],tokensSelected:[]}),m.internalKeys=Object.keys(m.defaultProps),t.default=m}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDE5YWI5ODJkYWU5NTY2ZjJmNWUwIiwid2VicGFjazovLy9leHRlcm5hbCB7XCJjb21tb25qczJcIjpcImJvdW5kbGVzcy10eXBlYWhlYWRcIn0iLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcImNvbW1vbmpzMlwiOlwiYm91bmRsZXNzLXV0aWxzLW9iamVjdC1pbnRlcnNlY3Rpb25cIn0iLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcImNvbW1vbmpzMlwiOlwiYm91bmRsZXNzLXV0aWxzLW9taXQta2V5c1wifSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwge1wiY29tbW9uanMyXCI6XCJjbGFzc25hbWVzXCJ9Iiwid2VicGFjazovLy9leHRlcm5hbCB7XCJjb21tb25qczJcIjpcInJlYWN0XCJ9Iiwid2VicGFjazovLy8uL3BhY2thZ2VzL2JvdW5kbGVzcy10b2tlbml6ZWQtaW5wdXQvaW5kZXguanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJ2YWx1ZSIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmVxdWlyZSIsIl9fd2VicGFja19leHBvcnRzX18iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsIndyaXRhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9jbGFzc25hbWVzX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfY2xhc3NuYW1lc19fX2RlZmF1bHQiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfYm91bmRsZXNzX3R5cGVhaGVhZF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2JvdW5kbGVzc190eXBlYWhlYWRfX19kZWZhdWx0IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2JvdW5kbGVzc191dGlsc19vYmplY3RfaW50ZXJzZWN0aW9uX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfYm91bmRsZXNzX3V0aWxzX29iamVjdF9pbnRlcnNlY3Rpb25fX19kZWZhdWx0IiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X2JvdW5kbGVzc191dGlsc19vbWl0X2tleXNfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9ib3VuZGxlc3NfdXRpbHNfb21pdF9rZXlzX19fZGVmYXVsdCIsIl9leHRlbmRzIiwiYXNzaWduIiwidGFyZ2V0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwia2V5IiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInByb3BzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImZpcnN0IiwiYXJyYXkiLCJsYXN0IiwiaXNGdW5jdGlvbiIsIngiLCJUb2tlbml6ZWRJbnB1dCIsIl9QdXJlQ29tcG9uZW50IiwiX3JlZiIsIl90ZW1wIiwiX3RoaXMiLCJfcmV0IiwidGhpcyIsIl9sZW4iLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiZ2V0UHJvdG90eXBlT2YiLCJhcHBseSIsImNvbmNhdCIsImZvY3VzIiwicmVmcyIsInR5cGVhaGVhZCIsImdldElucHV0Tm9kZSIsImdldFNlbGVjdGVkRW50aXR5VGV4dCIsImdldFZhbHVlIiwic2VsZWN0Iiwic2V0VmFsdWUiLCJhZGQiLCJpbmRleCIsInRva2VucyIsImluZGV4T2YiLCJoYW5kbGVBZGRUb2tlbiIsImhhbmRsZUlucHV0Q2xpY2siLCJldmVudCIsImNsZWFyU2VsZWN0aW9uIiwiaW5wdXRQcm9wcyIsIm9uQ2xpY2siLCJoYW5kbGVJbnB1dEZvY3VzIiwib25Gb2N1cyIsImhhbmRsZUtleURvd24iLCJ3aGljaCIsInNlbGVjdFByZXZpb3VzVG9rZW4iLCJzaGlmdEtleSIsInNlbGVjdE5leHRUb2tlbiIsInRva2Vuc1NlbGVjdGVkIiwicmVtb3ZlIiwibWV0YUtleSIsInByZXZlbnREZWZhdWx0IiwiX3N1cHByZXNzTmV4dFRva2VuU2VsZWN0aW9uIiwiaGFuZGxlTmV3U2VsZWN0aW9uIiwib25LZXlEb3duIiwicHJldlByb3BzIiwicHJldmlvdXNTZWxlY3RlZEluZGV4ZXMiLCJjdXJyZW50U2VsZWN0ZWRJbmRleGVzIiwiX3RoaXMyIiwiaW5kZXhlcyIsImlzQXJyYXkiLCJmaWx0ZXIiLCJpZHgiLCJoYW5kbGVSZW1vdmVUb2tlbnMiLCJhcHBlbmQiLCJzZWxlY3RlZCIsInNlbGVjdFRva2VuIiwicHJldmlvdXNUb2tlbiIsInNlbGVjdFRva2VucyIsIm5leHRUb2tlbiIsInN0b3BQcm9wYWdhdGlvbiIsInRva2VuQ2xvc2VDb21wb25lbnQiLCJ0b2tlbkNsb3NlVmlzaWJsZSIsImNsYXNzTmFtZSIsImhhbmRsZVRva2VuQ2xvc2VDbGljayIsImJpbmQiLCJfdGhpczMiLCJyb2xlIiwibWFwIiwicmVmIiwiYi10b2tlbmZpZWxkLXRva2VuLXNlbGVjdGVkIiwiaGFuZGxlVG9rZW5LZXlEb3duIiwidGFiSW5kZXgiLCJlbnRpdGllcyIsInRleHQiLCJyZW5kZXJUb2tlbkNsb3NlIiwiaW50ZXJuYWxLZXlzIiwicmVuZGVyVG9rZW5zIiwiYSIsImRlZmF1bHRQcm9wcyIsImNsZWFyT25TZWxlY3Rpb24iLCJvbkVudGl0eVNlbGVjdGVkIiwicHJvcFR5cGVzIiwiZnVuYyIsImVsZW1lbnQiLCJib29sIiwiYXJyYXlPZiIsIm51bWJlciIsImtleXMiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPQyxRQUNFLFNBQVVDLEdDR25CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBSCxPQUdBLElBQUFELEdBQUFLLEVBQUFELElBQ0FFLEVBQUFGLEVBQ0FHLEdBQUEsRUFDQU4sV0FVQSxPQU5BQyxHQUFBRSxHQUFBSSxLQUFBUixFQUFBQyxRQUFBRCxJQUFBQyxRQUFBRSxHQUdBSCxFQUFBTyxHQUFBLEVBR0FQLEVBQUFDLFFBdkJBLEdBQUFJLEtBK0RBLE9BbkNBRixHQUFBTSxFQUFBUCxFQUdBQyxFQUFBTyxFQUFBTCxFQUdBRixFQUFBRyxFQUFBLFNBQUFLLEdBQTJDLE1BQUFBLElBRzNDUixFQUFBUyxFQUFBLFNBQUFYLEVBQUFZLEVBQUFDLEdBQ0FYLEVBQUFZLEVBQUFkLEVBQUFZLElBQ0FHLE9BQUFDLGVBQUFoQixFQUFBWSxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVgsRUFBQWtCLEVBQUEsU0FBQXJCLEdBQ0EsR0FBQWMsR0FBQWQsS0FBQXNCLFdBQ0EsV0FBMkIsTUFBQXRCLEdBQUEsU0FDM0IsV0FBaUMsTUFBQUEsR0FFakMsT0FEQUcsR0FBQVMsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWCxFQUFBWSxFQUFBLFNBQUFRLEVBQUFDLEdBQXNELE1BQUFSLFFBQUFTLFVBQUFDLGVBQUFsQixLQUFBZSxFQUFBQyxJQUd0RHJCLEVBQUF3QixFQUFBLEdBR0F4QixJQUFBeUIsRUFBQSxLRE9NLFNBQVU1QixFQUFRQyxHRXZFeEJELEVBQUFDLFFBQUE0QixRQUFBLHdCRjZFTSxTQUFVN0IsRUFBUUMsR0c3RXhCRCxFQUFBQyxRQUFBNEIs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QkFBbUIsRUFDbkJ2QyxVQUNBZSxvQkFuRGF2QyxFQXNEVjZFLGFBQWV0SSxPQUFPa0osS0FBS3pGLEVBQWVnRixjUFk0d1MzSCxFQUE2QixRT2xFejBTMkMiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9XG4vKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJvdW5kbGVzcy10eXBlYWhlYWRcIik7XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJib3VuZGxlc3MtdXRpbHMtb2JqZWN0LWludGVyc2VjdGlvblwiKTtcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJvdW5kbGVzcy11dGlscy1vbWl0LWtleXNcIik7XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJjbGFzc25hbWVzXCIpO1xuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVhY3RcIik7XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfZXhwb3J0c19fLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2NsYXNzbmFtZXNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2NsYXNzbmFtZXNfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9jbGFzc25hbWVzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9ib3VuZGxlc3NfdHlwZWFoZWFkX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9ib3VuZGxlc3NfdHlwZWFoZWFkX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfYm91bmRsZXNzX3R5cGVhaGVhZF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfYm91bmRsZXNzX3V0aWxzX29iamVjdF9pbnRlcnNlY3Rpb25fXyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2JvdW5kbGVzc191dGlsc19vYmplY3RfaW50ZXJzZWN0aW9uX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfYm91bmRsZXNzX3V0aWxzX29iamVjdF9pbnRlcnNlY3Rpb25fXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X2JvdW5kbGVzc191dGlsc19vbWl0X2tleXNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X2JvdW5kbGVzc191dGlsc19vbWl0X2tleXNfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9ib3VuZGxlc3NfdXRpbHNfb21pdF9rZXlzX18pO1xudmFyIF9leHRlbmRzPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV07Zm9yKHZhciBrZXkgaW4gc291cmNlKXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLGtleSkpe3RhcmdldFtrZXldPXNvdXJjZVtrZXldO319fXJldHVybiB0YXJnZXQ7fTt2YXIgX2NyZWF0ZUNsYXNzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZihcInZhbHVlXCJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319cmV0dXJuIGZ1bmN0aW9uKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO307fSgpO2Z1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSxDb25zdHJ1Y3Rvcil7aWYoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTt9fWZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsY2FsbCl7aWYoIXNlbGYpe3Rocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTt9cmV0dXJuIGNhbGwmJih0eXBlb2YgY2FsbD09PVwib2JqZWN0XCJ8fHR5cGVvZiBjYWxsPT09XCJmdW5jdGlvblwiKT9jYWxsOnNlbGY7fWZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcyxzdXBlckNsYXNzKXtpZih0eXBlb2Ygc3VwZXJDbGFzcyE9PVwiZnVuY3Rpb25cIiYmc3VwZXJDbGFzcyE9PW51bGwpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBzdXBlckNsYXNzKTt9c3ViQ2xhc3MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyYmc3VwZXJDbGFzcy5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTpzdWJDbGFzcyxlbnVtZXJhYmxlOmZhbHNlLHdyaXRhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWV9fSk7aWYoc3VwZXJDbGFzcylPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLHN1cGVyQ2xhc3MpOnN1YkNsYXNzLl9fcHJvdG9fXz1zdXBlckNsYXNzO312YXIgZmlyc3Q9ZnVuY3Rpb24gZmlyc3QoYXJyYXkpe3JldHVybiBhcnJheVswXTt9O3ZhciBsYXN0PWZ1bmN0aW9uIGxhc3QoYXJyYXkpe3JldHVybiBhcnJheVthcnJheS5sZW5ndGgtMV07fTt2YXIgaXNGdW5jdGlvbj1mdW5jdGlvbiBpc0Z1bmN0aW9uKHgpe3JldHVybiB0eXBlb2YgeD09PSdmdW5jdGlvbic7fTt2YXIgVG9rZW5pemVkSW5wdXQ9ZnVuY3Rpb24oX1B1cmVDb21wb25lbnQpe19pbmhlcml0cyhUb2tlbml6ZWRJbnB1dCxfUHVyZUNvbXBvbmVudCk7ZnVuY3Rpb24gVG9rZW5pemVkSW5wdXQoKXt2YXIgX3JlZjt2YXIgX3RlbXAsX3RoaXMsX3JldDtfY2xhc3NDYWxsQ2hlY2sodGhpcyxUb2tlbml6ZWRJbnB1dCk7Zm9yKHZhciBfbGVuPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1BcnJheShfbGVuKSxfa2V5PTA7X2tleTxfbGVuO19rZXkrKyl7YXJnc1tfa2V5XT1hcmd1bWVudHNbX2tleV07fXJldHVybiBfcmV0PShfdGVtcD0oX3RoaXM9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywoX3JlZj1Ub2tlbml6ZWRJbnB1dC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihUb2tlbml6ZWRJbnB1dCkpLmNhbGwuYXBwbHkoX3JlZixbdGhpc10uY29uY2F0KGFyZ3MpKSksX3RoaXMpLF90aGlzLmZvY3VzPWZ1bmN0aW9uKCl7cmV0dXJuIF90aGlzLnJlZnMudHlwZWFoZWFkLmZvY3VzKCk7fSxfdGhpcy5nZXRJbnB1dE5vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXMucmVmcy50eXBlYWhlYWQuZ2V0SW5wdXROb2RlKCk7fSxfdGhpcy5nZXRTZWxlY3RlZEVudGl0eVRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXMucmVmcy50eXBlYWhlYWQuZ2V0U2VsZWN0ZWRFbnRpdHlUZXh0KCk7fSxfdGhpcy5nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiBfdGhpcy5yZWZzLnR5cGVhaGVhZC5nZXRWYWx1ZSgpO30sX3RoaXMuc2VsZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIF90aGlzLnJlZnMudHlwZWFoZWFkLnNlbGVjdCgpO30sX3RoaXMuc2V0VmFsdWU9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBfdGhpcy5yZWZzLnR5cGVhaGVhZC5zZXRWYWx1ZSh2YWx1ZSk7fSxfdGhpcy5hZGQ9ZnVuY3Rpb24oaW5kZXgpe2lmKF90aGlzLnByb3BzLnRva2Vucy5pbmRleE9mKGluZGV4KT09PS0xKXtfdGhpcy5wcm9wcy5oYW5kbGVBZGRUb2tlbihpbmRleCk7fX0sX3RoaXMuaGFuZGxlSW5wdXRDbGljaz1mdW5jdGlvbihldmVudCl7X3RoaXMuY2xlYXJTZWxlY3Rpb24oKTtpZihpc0Z1bmN0aW9uKF90aGlzLnByb3BzLmlucHV0UHJvcHMub25DbGljaykpe190aGlzLnByb3BzLmlucHV0UHJvcHMub25DbGljayhldmVudCk7fX0sX3RoaXMuaGFuZGxlSW5wdXRGb2N1cz1mdW5jdGlvbihldmVudCl7X3RoaXMuY2xlYXJTZWxlY3Rpb24oKTtpZihpc0Z1bmN0aW9uKF90aGlzLnByb3BzLmlucHV0UHJvcHMub25Gb2N1cykpe190aGlzLnByb3BzLmlucHV0UHJvcHMub25Gb2N1cyhldmVudCk7fX0sX3RoaXMuaGFuZGxlS2V5RG93bj1mdW5jdGlvbihldmVudCl7c3dpdGNoKGV2ZW50LndoaWNoKXtjYXNlIDM3Ol90aGlzLnNlbGVjdFByZXZpb3VzVG9rZW4oZXZlbnQuc2hpZnRLZXkpO2JyZWFrO2Nhc2UgMzk6X3RoaXMuc2VsZWN0TmV4dFRva2VuKGV2ZW50LnNoaWZ0S2V5KTticmVhaztjYXNlIDg6aWYoX3RoaXMucHJvcHMudG9rZW5zU2VsZWN0ZWQubGVuZ3RoKXtfdGhpcy5yZW1vdmUoX3RoaXMucHJvcHMudG9rZW5zU2VsZWN0ZWQpO190aGlzLmZvY3VzKCk7fWJyZWFrO2Nhc2UgNjU6aWYoZXZlbnQubWV0YUtleSl7ZXZlbnQucHJldmVudERlZmF1bHQoKTtfdGhpcy5mb2N1cygpO190aGlzLnNlbGVjdCgpO190aGlzLl9zdXBwcmVzc05leHRUb2tlblNlbGVjdGlvbj10cnVlO190aGlzLnByb3BzLmhhbmRsZU5ld1NlbGVjdGlvbihfdGhpcy5wcm9wcy50b2tlbnMpO319aWYoaXNGdW5jdGlvbihfdGhpcy5wcm9wcy5vbktleURvd24pKXtfdGhpcy5wcm9wcy5vbktleURvd24oZXZlbnQpO319LF90ZW1wKSxfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcyxfcmV0KTt9X2NyZWF0ZUNsYXNzKFRva2VuaXplZElucHV0LFt7a2V5Oidjb21wb25lbnREaWRVcGRhdGUnLHZhbHVlOmZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpe3ZhciBwcmV2aW91c1NlbGVjdGVkSW5kZXhlcz1wcmV2UHJvcHMudG9rZW5zU2VsZWN0ZWQ7dmFyIGN1cnJlbnRTZWxlY3RlZEluZGV4ZXM9dGhpcy5wcm9wcy50b2tlbnNTZWxlY3RlZDtpZih0aGlzLnByb3BzLnRva2Vucy5sZW5ndGg+cHJldlByb3BzLnRva2Vucy5sZW5ndGgpe3RoaXMuc2V0VmFsdWUoJycpO31pZih0aGlzLl9zdXBwcmVzc05leHRUb2tlblNlbGVjdGlvbil7dGhpcy5fc3VwcHJlc3NOZXh0VG9rZW5TZWxlY3Rpb249ZmFsc2U7cmV0dXJuO31pZihwcmV2aW91c1NlbGVjdGVkSW5kZXhlcyE9PWN1cnJlbnRTZWxlY3RlZEluZGV4ZXMmJmN1cnJlbnRTZWxlY3RlZEluZGV4ZXMubGVuZ3RoIT09MCl7aWYoY3VycmVudFNlbGVjdGVkSW5kZXhlcy5sZW5ndGg9PT0xfHxjdXJyZW50U2VsZWN0ZWRJbmRleGVzWzBdIT09cHJldmlvdXNTZWxlY3RlZEluZGV4ZXNbMF0pe3JldHVybiB0aGlzLnJlZnNbJ3Rva2VuXycrY3VycmVudFNlbGVjdGVkSW5kZXhlc1swXV0uZm9jdXMoKTt9ZWxzZSBpZihsYXN0KGN1cnJlbnRTZWxlY3RlZEluZGV4ZXMpIT09bGFzdChwcmV2aW91c1NlbGVjdGVkSW5kZXhlcykpe3JldHVybiB0aGlzLnJlZnNbJ3Rva2VuXycrbGFzdChjdXJyZW50U2VsZWN0ZWRJbmRleGVzKV0uZm9jdXMoKTt9dGhpcy5yZWZzWyd0b2tlbl8nK2N1cnJlbnRTZWxlY3RlZEluZGV4ZXNbMF1dLmZvY3VzKCk7fX19LHtrZXk6J3JlbW92ZScsdmFsdWU6ZnVuY3Rpb24gcmVtb3ZlKGluZGV4KXt2YXIgX3RoaXMyPXRoaXM7dmFyIGluZGV4ZXM9KEFycmF5LmlzQXJyYXkoaW5kZXgpP2luZGV4OltpbmRleF0pLmZpbHRlcihmdW5jdGlvbihpZHgpe3JldHVybiBfdGhpczIucHJvcHMudG9rZW5zLmluZGV4T2YoaWR4KSE9PS0xO30pO2lmKGluZGV4ZXMubGVuZ3RoKXt0aGlzLnByb3BzLmhhbmRsZVJlbW92ZVRva2VucyhpbmRleGVzKTt9fX0se2tleTonc2VsZWN0VG9rZW4nLHZhbHVlOmZ1bmN0aW9uIHNlbGVjdFRva2VuKGluZGV4KXt0aGlzLnByb3BzLmhhbmRsZU5ld1NlbGVjdGlvbihbaW5kZXhdKTt9fSx7a2V5OidzZWxlY3RUb2tlbnMnLHZhbHVlOmZ1bmN0aW9uIHNlbGVjdFRva2VucyhpbmRleGVzKXt0aGlzLnByb3BzLmhhbmRsZU5ld1NlbGVjdGlvbihpbmRleGVzKTt9fSx7a2V5OidzZWxlY3RQcmV2aW91c1Rva2VuJyx2YWx1ZTpmdW5jdGlvbiBzZWxlY3RQcmV2aW91c1Rva2VuKGFwcGVuZCl7dmFyIHNlbGVjdGVkPXRoaXMucHJvcHMudG9rZW5zU2VsZWN0ZWQ7dmFyIGluZGV4ZXM9dGhpcy5wcm9wcy50b2tlbnM7aWYoc2VsZWN0ZWQubGVuZ3RoPT09MSYmZmlyc3Qoc2VsZWN0ZWQpPT09Zmlyc3QoaW5kZXhlcykpe3JldHVybjt9aWYoc2VsZWN0ZWQubGVuZ3RoPT09MCl7dGhpcy5zZWxlY3RUb2tlbihsYXN0KGluZGV4ZXMpKTt9ZWxzZXt2YXIgcHJldmlvdXNUb2tlbj1pbmRleGVzW2luZGV4ZXMuaW5kZXhPZihmaXJzdChzZWxlY3RlZCkpLTFdO3RoaXMuc2VsZWN0VG9rZW5zKGFwcGVuZD9bcHJldmlvdXNUb2tlbl0uY29uY2F0KHNlbGVjdGVkKTpbcHJldmlvdXNUb2tlbl0pO319fSx7a2V5OidzZWxlY3ROZXh0VG9rZW4nLHZhbHVlOmZ1bmN0aW9uIHNlbGVjdE5leHRUb2tlbihhcHBlbmQpe3ZhciBzZWxlY3RlZD10aGlzLnByb3BzLnRva2Vuc1NlbGVjdGVkO3ZhciBpbmRleGVzPXRoaXMucHJvcHMudG9rZW5zO2lmKHNlbGVjdGVkLmxlbmd0aD09PTApe3JldHVybjt9aWYobGFzdChzZWxlY3RlZCk9PT1sYXN0KGluZGV4ZXMpKXt0aGlzLmNsZWFyU2VsZWN0aW9uKCk7dGhpcy5mb2N1cygpO31lbHNle3ZhciBuZXh0VG9rZW49aW5kZXhlc1tpbmRleGVzLmluZGV4T2YobGFzdChzZWxlY3RlZCkpKzFdO3RoaXMuc2VsZWN0VG9rZW5zKGFwcGVuZD9zZWxlY3RlZC5jb25jYXQobmV4dFRva2VuKTpbbmV4dFRva2VuXSk7fX19LHtrZXk6J2NsZWFyU2VsZWN0aW9uJyx2YWx1ZTpmdW5jdGlvbiBjbGVhclNlbGVjdGlvbigpe3RoaXMucHJvcHMuaGFuZGxlTmV3U2VsZWN0aW9uKFtdKTt9fSx7a2V5OidoYW5kbGVUb2tlbkNsb3NlQ2xpY2snLHZhbHVlOmZ1bmN0aW9uIGhhbmRsZVRva2VuQ2xvc2VDbGljayhpbmRleCxldmVudCl7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7dGhpcy5yZW1vdmUoaW5kZXgpO3RoaXMuZm9jdXMoKTtpZih0aGlzLnByb3BzLnRva2VuQ2xvc2VDb21wb25lbnQucHJvcHMub25DbGljayl7dGhpcy5wcm9wcy50b2tlbkNsb3NlQ29tcG9uZW50LnByb3BzLm9uQ2xpY2soZXZlbnQpO319fSx7a2V5OidyZW5kZXJUb2tlbkNsb3NlJyx2YWx1ZTpmdW5jdGlvbiByZW5kZXJUb2tlbkNsb3NlKGluZGV4KXtpZih0aGlzLnByb3BzLnRva2VuQ2xvc2VWaXNpYmxlKXtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiY2xvbmVFbGVtZW50XCJdKSh0aGlzLnByb3BzLnRva2VuQ2xvc2VDb21wb25lbnQse2NsYXNzTmFtZTpfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfY2xhc3NuYW1lc19fX2RlZmF1bHQoKSgnYi10b2tlbmZpZWxkLXRva2VuLWNsb3NlJyx0aGlzLnByb3BzLnRva2VuQ2xvc2VDb21wb25lbnQucHJvcHMuY2xhc3NOYW1lKSxvbkNsaWNrOnRoaXMuaGFuZGxlVG9rZW5DbG9zZUNsaWNrLmJpbmQodGhpcyxpbmRleCl9KTt9fX0se2tleTonaGFuZGxlVG9rZW5LZXlEb3duJyx2YWx1ZTpmdW5jdGlvbiBoYW5kbGVUb2tlbktleURvd24oaW5kZXgsZXZlbnQpe3N3aXRjaChldmVudC53aGljaCl7Y2FzZSAxMzpjYXNlIDMyOnRoaXMuc2VsZWN0VG9rZW4oaW5kZXgpO2V2ZW50LnByZXZlbnREZWZhdWx0KCk7YnJlYWs7Y2FzZSA4OnRoaXMucmVtb3ZlKGluZGV4KTt0aGlzLmZvY3VzKCk7ZXZlbnQucHJldmVudERlZmF1bHQoKTticmVhazt9fX0se2tleToncmVuZGVyVG9rZW5zJyx2YWx1ZTpmdW5jdGlvbiByZW5kZXJUb2tlbnMoKXt2YXIgX3RoaXMzPXRoaXM7cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcImNyZWF0ZUVsZW1lbnRcIl0pKCdkaXYnLHtjbGFzc05hbWU6J2ItdG9rZW5maWVsZC10b2tlbnMnLHJvbGU6J2xpc3Rib3gnfSx0aGlzLnByb3BzLnRva2Vucy5tYXAoZnVuY3Rpb24oaW5kZXgpe3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19bXCJjcmVhdGVFbGVtZW50XCJdKSgnZGl2Jyx7cmVmOid0b2tlbl8nK2luZGV4LGtleTppbmRleCxjbGFzc05hbWU6X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2NsYXNzbmFtZXNfX19kZWZhdWx0KCkoJ2ItdG9rZW5maWVsZC10b2tlbicseydiLXRva2VuZmllbGQtdG9rZW4tc2VsZWN0ZWQnOl90aGlzMy5wcm9wcy50b2tlbnNTZWxlY3RlZC5pbmRleE9mKGluZGV4KSE9PS0xfSksb25DbGljazpfdGhpczMuc2VsZWN0VG9rZW4uYmluZChfdGhpczMsaW5kZXgpLG9uS2V5RG93bjpfdGhpczMuaGFuZGxlVG9rZW5LZXlEb3duLmJpbmQoX3RoaXMzLGluZGV4KSxyb2xlOidvcHRpb24nLHRhYkluZGV4OicwJ30sX3RoaXMzLnByb3BzLmVudGl0aWVzW2luZGV4XS50ZXh0LF90aGlzMy5yZW5kZXJUb2tlbkNsb3NlKGluZGV4KSk7fSkpO319LHtrZXk6J3JlbmRlcicsdmFsdWU6ZnVuY3Rpb24gcmVuZGVyKCl7cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcImNyZWF0ZUVsZW1lbnRcIl0pKCdkaXYnLF9leHRlbmRzKHt9LF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9ib3VuZGxlc3NfdXRpbHNfb21pdF9rZXlzX19fZGVmYXVsdCgpKHRoaXMucHJvcHMsVG9rZW5pemVkSW5wdXQuaW50ZXJuYWxLZXlzKSx7cmVmOid3cmFwcGVyJyxjbGFzc05hbWU6X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX2NsYXNzbmFtZXNfX19kZWZhdWx0KCkoJ2ItdG9rZW5maWVsZC13cmFwcGVyJyx0aGlzLnByb3BzLmNsYXNzTmFtZSksb25LZXlEb3duOnRoaXMuaGFuZGxlS2V5RG93bn0pLHRoaXMucmVuZGVyVG9rZW5zKCksX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiY3JlYXRlRWxlbWVudFwiXSkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2JvdW5kbGVzc190eXBlYWhlYWRfX19kZWZhdWx0LmEsX2V4dGVuZHMoe30sX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX2JvdW5kbGVzc191dGlsc19vYmplY3RfaW50ZXJzZWN0aW9uX19fZGVmYXVsdCgpKHRoaXMucHJvcHMsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2JvdW5kbGVzc190eXBlYWhlYWRfX19kZWZhdWx0LmEuZGVmYXVsdFByb3BzKSx7cmVmOid0eXBlYWhlYWQnLGNsYXNzTmFtZTonYi10b2tlbmZpZWxkJyxjbGVhck9uU2VsZWN0aW9uOnRydWUsaW5wdXRQcm9wczpfZXh0ZW5kcyh7fSx0aGlzLnByb3BzLmlucHV0UHJvcHMse29uQ2xpY2s6dGhpcy5oYW5kbGVJbnB1dENsaWNrLG9uRm9jdXM6dGhpcy5oYW5kbGVJbnB1dEZvY3VzfSksb25FbnRpdHlTZWxlY3RlZDp0aGlzLmFkZH0pKSk7fX1dKTtyZXR1cm4gVG9rZW5pemVkSW5wdXQ7fShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcIlB1cmVDb21wb25lbnRcIl0pO1Rva2VuaXplZElucHV0LnByb3BUeXBlcz1fZXh0ZW5kcyh7fSxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfYm91bmRsZXNzX3R5cGVhaGVhZF9fX2RlZmF1bHQuYS5wcm9wVHlwZXMse2hhbmRsZUFkZFRva2VuOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLmZ1bmMsaGFuZGxlUmVtb3ZlVG9rZW5zOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLmZ1bmMsaGFuZGxlTmV3U2VsZWN0aW9uOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLmZ1bmMsdG9rZW5DbG9zZUNvbXBvbmVudDpfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcIlByb3BUeXBlc1wiXS5lbGVtZW50LHRva2VuQ2xvc2VWaXNpYmxlOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLmJvb2wsdG9rZW5zOl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLmFycmF5T2YoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19bXCJQcm9wVHlwZXNcIl0ubnVtYmVyKSx0b2tlbnNTZWxlY3RlZDpfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcmVhY3RfX1tcIlByb3BUeXBlc1wiXS5hcnJheU9mKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9yZWFjdF9fW1wiUHJvcFR5cGVzXCJdLm51bWJlcil9KTtUb2tlbml6ZWRJbnB1dC5kZWZhdWx0UHJvcHM9X2V4dGVuZHMoe30sX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX2JvdW5kbGVzc190eXBlYWhlYWRfX19kZWZhdWx0LmEuZGVmYXVsdFByb3BzLHtoYW5kbGVBZGRUb2tlbjpmdW5jdGlvbiBoYW5kbGVBZGRUb2tlbigpe30saGFuZGxlUmVtb3ZlVG9rZW5zOmZ1bmN0aW9uIGhhbmRsZVJlbW92ZVRva2Vucygpe30saGFuZGxlTmV3U2VsZWN0aW9uOmZ1bmN0aW9uIGhhbmRsZU5ld1NlbGVjdGlvbigpe30sdG9rZW5DbG9zZUNvbXBvbmVudDpfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3JlYWN0X19bXCJjcmVhdGVFbGVtZW50XCJdKSgnZGl2JyxudWxsLCdYJyksdG9rZW5DbG9zZVZpc2libGU6dHJ1ZSx0b2tlbnM6W10sdG9rZW5zU2VsZWN0ZWQ6W119KTtUb2tlbml6ZWRJbnB1dC5pbnRlcm5hbEtleXM9T2JqZWN0LmtleXMoVG9rZW5pemVkSW5wdXQuZGVmYXVsdFByb3BzKTsvKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gVG9rZW5pemVkSW5wdXQ7XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gaW5kZXguanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAxOWFiOTgyZGFlOTU2NmYyZjVlMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJvdW5kbGVzcy10eXBlYWhlYWRcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wiY29tbW9uanMyXCI6XCJib3VuZGxlc3MtdHlwZWFoZWFkXCJ9XG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJvdW5kbGVzcy11dGlscy1vYmplY3QtaW50ZXJzZWN0aW9uXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcImNvbW1vbmpzMlwiOlwiYm91bmRsZXNzLXV0aWxzLW9iamVjdC1pbnRlcnNlY3Rpb25cIn1cbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYm91bmRsZXNzLXV0aWxzLW9taXQta2V5c1wiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJjb21tb25qczJcIjpcImJvdW5kbGVzcy11dGlscy1vbWl0LWtleXNcIn1cbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY2xhc3NuYW1lc1wiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJjb21tb25qczJcIjpcImNsYXNzbmFtZXNcIn1cbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVhY3RcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wiY29tbW9uanMyXCI6XCJyZWFjdFwifVxuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQge2Nsb25lRWxlbWVudCwgY3JlYXRlRWxlbWVudCwgUHJvcFR5cGVzLCBQdXJlQ29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmltcG9ydCBUeXBlYWhlYWQgZnJvbSAnYm91bmRsZXNzLXR5cGVhaGVhZCc7XG5pbXBvcnQgZXh0cmFjdENoaWxkUHJvcHMgZnJvbSAnYm91bmRsZXNzLXV0aWxzLW9iamVjdC1pbnRlcnNlY3Rpb24nO1xuaW1wb3J0IG9taXQgZnJvbSAnYm91bmRsZXNzLXV0aWxzLW9taXQta2V5cyc7XG5cbmNvbnN0IGZpcnN0ID0gKGFycmF5KSA9PiBhcnJheVswXTtcbmNvbnN0IGxhc3QgPSAoYXJyYXkpID0+IGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdO1xuY29uc3QgaXNGdW5jdGlvbiA9ICh4KSA9PiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcblxuLyoqXG4qIEJhc2ljIHVzYWdlIG9mIHRoaXMgY29tcG9uZW50IGlzIGlkZW50aWNhbCB0byB0aGF0IG9mIFtUeXBlYWhlYWRdXG4qIChodHRwczovL2dpdGh1Yi5jb20vZW5pZ21hLWlvL2JvdW5kbGVzcy9tYXN0ZXIvcGFja2FnZXMvKiBib3VuZGxlc3MtdHlwZWFoZWFkKS4gQWRkaXRpb25hbCBwcm9wcyBhcmUgYXZhaWxhYmxlIHRvIHRha2VcbiogYWR2YW50YWdlIG9mIHRoZSB0b2tlbml6YXRpb24gZnVuY3Rpb25hbGl0eS5cbipcbiogIyMgQ29tcG9uZW50IEluc3RhbmNlIE1ldGhvZHNcbipcbiogV2hlbiB1c2luZyBgVG9rZW5pemVkSW5wdXRgIGluIHlvdXIgcHJvamVjdCwgeW91IG1heSBjYWxsIHRoZSBmb2xsb3dpbmcgbWV0aG9kcyBvbiBhIHJlbmRlcmVkIGluc3RhbmNlIG9mIHRoZVxuKiBjb21wb25lbnQuIFVzZSBbYHJlZnNgXSgqIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvcmVmcy1hbmQtdGhlLWRvbS5odG1sKSB0byBnZXQgdGhlIGluc3RhbmNlLlxuKlxuKiAtIF9fYGFkZChpbmRleDogbnVtYmVyKWBfX1xuKiAgIHByb2dyYW1tYXRpY2FsbHkgY3JlYXRlcyBhIHRva2VuIGZvciBgcHJvcHMuZW50aXRpZXNbaW5kZXhdYDsgYHByb3BzLmhhbmRsZUFkZFRva2VuYCB3aWxsIGJlIGNhbGxlZCBhcyBhIGhpbnQgdG9cbiogICBwZXJzaXN0IHRoZSBjaGFuZ2UgaW4gKiB5b3VyIGNvbnRyb2xsZXIgdmlldyBvciBvdGhlciBhcHBsaWNhdGlvbiBzdGF0ZVxuKlxuKiAtIF9fYGZvY3VzKClgX19cbiogICBmb2N1c2VzIHRoZSBicm93c2VyIG9vbiB0aGUgdW5kZXJseWluZyB0ZXh0dWFsIGlucHV0IGZvciBpbW1lZGlhdGUgdGV4dCBlbnRyeVxuKlxuKiAtIF9fYGdldElucHV0Tm9kZSgpYF9fXG4qICAgcmV0dXJucyB0aGUgcmF3IHVuZGVybHlpbmcgdGV4dHVhbCBpbnB1dCBET00gbm9kZVxuKlxuKiAtIF9fYGdldFNlbGVjdGVkRW50aXR5VGV4dCgpYF9fXG4qICAgcmV0dXJucyB0aGUgYHRleHRgIHByb3BlcnR5IG9mIHRoZSBjdXJyZW50bHkgaGlnaGxpZ2h0ZWQgZW50aXR5IChmcm9tIGBwcm9wcy5lbnRpdGllc2ApLCBvciByZXR1cm5zIGFuIGVtcHR5IHN0cmluZ1xuKlxuKiAtIF9fYGdldFZhbHVlKClgX19cbiogICByZXRyaWV2ZXMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHVuZGVybHlpbmcgdGV4dHVhbCBpbnB1dFxuKlxuKiAtIF9fYHJlbW92ZShpbmRleDogbnVtYmVyKWBfX1xuKiAgIHByb2dyYW1tYXRpY2FsbHkgcmVtb3ZlcyB0aGUgdG9rZW4gZm9yIGBwcm9wcy5lbnRpdGllc1tpbmRleF1gOyBgcHJvcHMuaGFuZGxlUmVtb3ZlVG9rZW5zYCB3aWxsIGJlIGNhbGxlZCBhcyBhIGhpbnRcbiogICB0byBwZXJzaXN0IHRoZSAqIGNoYW5nZSBpbiB5b3VyIGNvbnRyb2xsZXIgdmlldyBvciBvdGhlciBhcHBsaWNhdGlvbiBzdGF0ZVxuKlxuKiAtIF9fYHNlbGVjdCgpYF9fXG4qICAgcHJvZ3JhbW1hdGljYWxseSBjcmVhdGVzIGEgZnVsbCBzZWxlY3Rpb24gb24gdGhlIHVuZGVybHlpbmcgdGV4dHVhbCBpbnB1dCBzdWNoIHRoYXQgYSBwcmVzcyBvZiB0aGUgQmFja3NwYWNlIGtleVxuKiAgIHdvdWxkIGZ1bGx5IGNsZWFyIHRoZSAqIGlucHV0XG4qXG4qIC0gX19gc2V0VmFsdWUodmFsdWU6IHN0cmluZylgX19cbiogICBzZXRzIHRoZSB1bmRlcmx5aW5nIHRleHR1YWwgaW5wdXQgdG8gdGhlIHNwZWNpZmllZCB0ZXh0IGFuZCB1cGRhdGVzIGludGVybmFsIHN0YXRlOyBkbyBub3QgdXNlIHRoaXMgbWV0aG9kIHdoZW5cbiogICB1c2luZyBgVHlwZWFoZWFkYCBhcyBhIFwiY29udHJvbGxlZCBpbnB1dFwiXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRva2VuaXplZElucHV0IGV4dGVuZHMgUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgLi4uVHlwZWFoZWFkLnByb3BUeXBlcyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZnVuY3Rpb24gaGFuZGxlciB0aGF0IGlzIGNhbGxlZCB3aGVuIGFuIGVudGl0eSBpcyBzZWxlY3RlZCBieSB0aGUgdXNlciBhbmQgYSB0b2tlbiBzaG91bGQgYmUgY3JlYXRlZFxuICAgICAgICAgKi9cbiAgICAgICAgaGFuZGxlQWRkVG9rZW46IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBmdW5jdGlvbiBoYW5kbGVyIHRoYXQgaXMgY2FsbGVkIHdoZW4gb25lIG9yIG1vcmUgdG9rZW5zIGFyZSByZW1vdmVkIGJ5IHRoZSB1c2VyIHZpYSBjbGlja2luZyB0aGUgXCJjbG9zZVwiXG4gICAgICAgICAqIGJ1dHRvbiBvciBwcmVzc2luZyB0aGUgYEJhY2tzcGFjZWAga2V5IHdoaWxlIHRva2VucyBhcmUgc2VsZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGhhbmRsZVJlbW92ZVRva2VuczogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGZ1bmN0aW9uIGhhbmRsZXIgdGhhdCBpcyBjYWxsZWQgd2hlbiBvbmUgb3IgbW9yZSB0b2tlbnMgYXJlIHNlbGVjdGVkIGJ5IHRoZSB1c2VyIHZpYSBjbGljayBvciBrZXlib2FyZFxuICAgICAgICAgKiBhY3Rpb25zOyBjYWxsZWQgd2l0aCB3aGF0IHRoZSBuZXcgc2VsZWN0aW9uIHNob3VsZCBiZVxuICAgICAgICAgKi9cbiAgICAgICAgaGFuZGxlTmV3U2VsZWN0aW9uOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIEpTWCB1c2VkIGZvciB0aGUgY2xvc2UgYnV0dG9uIGl0c2VsZlxuICAgICAgICAgKi9cbiAgICAgICAgdG9rZW5DbG9zZUNvbXBvbmVudDogUHJvcFR5cGVzLmVsZW1lbnQsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRldGVybWluZXMgaWYgdGhlIGAuYi10b2tlbmZpZWxkLXRva2VuLWNsb3NlYCBlbGVtZW50IHNob3VsZCBiZSByZW5kZXJlZCBmb3IgZWFjaCB0b2tlblxuICAgICAgICAgKi9cbiAgICAgICAgdG9rZW5DbG9zZVZpc2libGU6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgaW5kZXhlcyBvZiBlbnRpdGllcyB0aGF0IHNob3VsZCBiZSByZW5kZXJlZCBhcyBcInRva2Vuc1wiIGluIHRoZSBjb21wb25lbnQgVUlcbiAgICAgICAgICovXG4gICAgICAgIHRva2VuczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm51bWJlciksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoZSBpbmRleGVzIG9mIHRva2VuaXplZCBlbnRpdGllcyB0aGF0IGFyZSBwYXJ0IG9mIGFuIGFjdGl2ZSBzZWxlY3Rpb247IHRoZSB1c2VyIGNhbiBwcmVzcyBgQmFja3NwYWNlYCB0b1xuICAgICAgICAgKiB0cmlnZ2VyIGBoYW5kbGVSZW1vdmVUb2tlbnNgXG4gICAgICAgICAqL1xuICAgICAgICB0b2tlbnNTZWxlY3RlZDogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm51bWJlciksXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgLi4uVHlwZWFoZWFkLmRlZmF1bHRQcm9wcyxcbiAgICAgICAgaGFuZGxlQWRkVG9rZW46ICgpID0+IHt9LFxuICAgICAgICBoYW5kbGVSZW1vdmVUb2tlbnM6ICgpID0+IHt9LFxuICAgICAgICBoYW5kbGVOZXdTZWxlY3Rpb246ICgpID0+IHt9LFxuICAgICAgICB0b2tlbkNsb3NlQ29tcG9uZW50OiAoPGRpdj5YPC9kaXY+KSxcbiAgICAgICAgdG9rZW5DbG9zZVZpc2libGU6IHRydWUsXG4gICAgICAgIHRva2VuczogW10sXG4gICAgICAgIHRva2Vuc1NlbGVjdGVkOiBbXSxcbiAgICB9XG5cbiAgICBzdGF0aWMgaW50ZXJuYWxLZXlzID0gT2JqZWN0LmtleXMoVG9rZW5pemVkSW5wdXQuZGVmYXVsdFByb3BzKVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgICAgICBjb25zdCBwcmV2aW91c1NlbGVjdGVkSW5kZXhlcyA9IHByZXZQcm9wcy50b2tlbnNTZWxlY3RlZDtcbiAgICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkSW5kZXhlcyA9IHRoaXMucHJvcHMudG9rZW5zU2VsZWN0ZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMudG9rZW5zLmxlbmd0aCA+IHByZXZQcm9wcy50b2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKCcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9zdXBwcmVzc05leHRUb2tlblNlbGVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NOZXh0VG9rZW5TZWxlY3Rpb24gPSBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCAgIHByZXZpb3VzU2VsZWN0ZWRJbmRleGVzICE9PSBjdXJyZW50U2VsZWN0ZWRJbmRleGVzXG4gICAgICAgICAgICAmJiBjdXJyZW50U2VsZWN0ZWRJbmRleGVzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRTZWxlY3RlZEluZGV4ZXMubGVuZ3RoID09PSAxXG4gICAgICAgICAgICAgICAgfHwgY3VycmVudFNlbGVjdGVkSW5kZXhlc1swXSAhPT0gcHJldmlvdXNTZWxlY3RlZEluZGV4ZXNbMF0gLyogbXVsdGkgc2VsZWN0aW9uLCBsZWZ0d2FyZCAqLykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZnNbYHRva2VuXyR7Y3VycmVudFNlbGVjdGVkSW5kZXhlc1swXX1gXS5mb2N1cygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0KGN1cnJlbnRTZWxlY3RlZEluZGV4ZXMpICE9PSBsYXN0KHByZXZpb3VzU2VsZWN0ZWRJbmRleGVzKSAvKiBtdWx0aSBzZWxlY3Rpb24sIHJpZ2h0d2FyZCAqLykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZnNbYHRva2VuXyR7bGFzdChjdXJyZW50U2VsZWN0ZWRJbmRleGVzKX1gXS5mb2N1cygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnJlZnNbYHRva2VuXyR7Y3VycmVudFNlbGVjdGVkSW5kZXhlc1swXX1gXS5mb2N1cygpO1xuICAgICAgICB9IC8vIG1vdmUgZm9jdXNcbiAgICB9XG5cbiAgICAvLyBwYXNzdGhyb3VnaHMgdG8gVHlwZWFoZWFkIGluc3RhbmNlIG1ldGhvZHNcbiAgICBmb2N1cyA9ICgpID0+IHRoaXMucmVmcy50eXBlYWhlYWQuZm9jdXMoKVxuICAgIGdldElucHV0Tm9kZSA9ICgpID0+IHRoaXMucmVmcy50eXBlYWhlYWQuZ2V0SW5wdXROb2RlKClcbiAgICBnZXRTZWxlY3RlZEVudGl0eVRleHQgPSAoKSA9PiB0aGlzLnJlZnMudHlwZWFoZWFkLmdldFNlbGVjdGVkRW50aXR5VGV4dCgpXG4gICAgZ2V0VmFsdWUgPSAoKSA9PiB0aGlzLnJlZnMudHlwZWFoZWFkLmdldFZhbHVlKClcbiAgICBzZWxlY3QgPSAoKSA9PiB0aGlzLnJlZnMudHlwZWFoZWFkLnNlbGVjdCgpXG4gICAgc2V0VmFsdWUgPSAodmFsdWUpID0+IHRoaXMucmVmcy50eXBlYWhlYWQuc2V0VmFsdWUodmFsdWUpXG5cbiAgICBhZGQgPSAoaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudG9rZW5zLmluZGV4T2YoaW5kZXgpID09PSAtMSkgeyB0aGlzLnByb3BzLmhhbmRsZUFkZFRva2VuKGluZGV4KTsgfVxuICAgIH1cblxuICAgIHJlbW92ZShpbmRleCkge1xuICAgICAgICBjb25zdCBpbmRleGVzID0gKEFycmF5LmlzQXJyYXkoaW5kZXgpID8gaW5kZXggOiBbaW5kZXhdKS5maWx0ZXIoKGlkeCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMudG9rZW5zLmluZGV4T2YoaWR4KSAhPT0gLTE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChpbmRleGVzLmxlbmd0aCkgeyB0aGlzLnByb3BzLmhhbmRsZVJlbW92ZVRva2VucyhpbmRleGVzKTsgfVxuICAgIH1cblxuICAgIHNlbGVjdFRva2VuKGluZGV4KSB7XG4gICAgICAgIHRoaXMucHJvcHMuaGFuZGxlTmV3U2VsZWN0aW9uKFtpbmRleF0pO1xuICAgIH1cblxuICAgIHNlbGVjdFRva2VucyhpbmRleGVzKSB7XG4gICAgICAgIHRoaXMucHJvcHMuaGFuZGxlTmV3U2VsZWN0aW9uKGluZGV4ZXMpO1xuICAgIH1cblxuICAgIHNlbGVjdFByZXZpb3VzVG9rZW4oYXBwZW5kKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5wcm9wcy50b2tlbnNTZWxlY3RlZDtcbiAgICAgICAgY29uc3QgaW5kZXhlcyA9IHRoaXMucHJvcHMudG9rZW5zO1xuXG4gICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGggPT09IDEgJiYgZmlyc3Qoc2VsZWN0ZWQpID09PSBmaXJzdChpbmRleGVzKSkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBhbHJlYWR5IGF0IGxlZnRtb3N0IGJvdW5kXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoID09PSAwKSB7IC8vIHBpY2sgdGhlIHJpZ2h0bW9zdFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUb2tlbihsYXN0KGluZGV4ZXMpKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gYWRkIHRoZSBuZXh0IGxlZnRtb3N0IHRvIGEgcmVjb25zdHJ1Y3RlZCBcInNlbGVjdGVkXCIgYXJyYXlcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzVG9rZW4gPSBpbmRleGVzW2luZGV4ZXMuaW5kZXhPZihmaXJzdChzZWxlY3RlZCkpIC0gMV07XG5cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9rZW5zKGFwcGVuZCA/IFtwcmV2aW91c1Rva2VuXS5jb25jYXQoc2VsZWN0ZWQpIDogW3ByZXZpb3VzVG9rZW5dKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNlbGVjdE5leHRUb2tlbihhcHBlbmQpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnByb3BzLnRva2Vuc1NlbGVjdGVkO1xuICAgICAgICBjb25zdCBpbmRleGVzID0gdGhpcy5wcm9wcy50b2tlbnM7XG5cbiAgICAgICAgaWYgKHNlbGVjdGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxhc3Qoc2VsZWN0ZWQpID09PSBsYXN0KGluZGV4ZXMpKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0VG9rZW4gPSBpbmRleGVzW2luZGV4ZXMuaW5kZXhPZihsYXN0KHNlbGVjdGVkKSkgKyAxXTtcblxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUb2tlbnMoYXBwZW5kID8gc2VsZWN0ZWQuY29uY2F0KG5leHRUb2tlbikgOiBbbmV4dFRva2VuXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGVhclNlbGVjdGlvbigpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVOZXdTZWxlY3Rpb24oW10pO1xuICAgIH1cblxuICAgIGhhbmRsZUlucHV0Q2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMucHJvcHMuaW5wdXRQcm9wcy5vbkNsaWNrKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uQ2xpY2soZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlSW5wdXRGb2N1cyA9IChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5wcm9wcy5pbnB1dFByb3BzLm9uRm9jdXMpKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmlucHV0UHJvcHMub25Gb2N1cyhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQud2hpY2gpIHtcbiAgICAgICAgY2FzZSAzNzogICAgLy8gbGVmdCBhcnJvd1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RQcmV2aW91c1Rva2VuKGV2ZW50LnNoaWZ0S2V5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMzk6ICAgIC8vIHJpZ2h0IGFycm93XG4gICAgICAgICAgICB0aGlzLnNlbGVjdE5leHRUb2tlbihldmVudC5zaGlmdEtleSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDg6ICAgICAvLyBiYWNrc3BhY2VcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnRva2Vuc1NlbGVjdGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRoaXMucHJvcHMudG9rZW5zU2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSA2NTogICAgLy8gbGV0dGVyIFwiYVwiXG4gICAgICAgICAgICBpZiAoZXZlbnQubWV0YUtleSkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QoKTtcblxuICAgICAgICAgICAgICAgIC8vIGhhY2t5LCBidXQgdGhlIG9ubHkgd2F5IHVubGVzcyB3ZSBtb3ZlIHNlbGVjdGlvbiBtYW5hZ2VtZW50IGludGVybmFsIGFnYWluXG4gICAgICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NOZXh0VG9rZW5TZWxlY3Rpb24gPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVOZXdTZWxlY3Rpb24odGhpcy5wcm9wcy50b2tlbnMpO1xuICAgICAgICAgICAgfSAvLyBcImNtZFwiXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLnByb3BzLm9uS2V5RG93bikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZVRva2VuQ2xvc2VDbGljayhpbmRleCwgZXZlbnQpIHtcbiAgICAgICAgLy8gaWYgd2UgZG9uJ3Qgc3RvcCBwcm9wYWdhdGlvbiwgdGhlIGV2ZW50IGJ1YmJsZXMgYW5kIHJlc3VsdHMgaW4gYSBmYWlsZWQgdG9rZW4gc2VsZWN0aW9uXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIHRoaXMucmVtb3ZlKGluZGV4KTtcbiAgICAgICAgdGhpcy5mb2N1cygpO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnRva2VuQ2xvc2VDb21wb25lbnQucHJvcHMub25DbGljaykge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy50b2tlbkNsb3NlQ29tcG9uZW50LnByb3BzLm9uQ2xpY2soZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyVG9rZW5DbG9zZShpbmRleCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy50b2tlbkNsb3NlVmlzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lRWxlbWVudCh0aGlzLnByb3BzLnRva2VuQ2xvc2VDb21wb25lbnQsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGN4KCdiLXRva2VuZmllbGQtdG9rZW4tY2xvc2UnLCB0aGlzLnByb3BzLnRva2VuQ2xvc2VDb21wb25lbnQucHJvcHMuY2xhc3NOYW1lKSxcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZVRva2VuQ2xvc2VDbGljay5iaW5kKHRoaXMsIGluZGV4KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlVG9rZW5LZXlEb3duKGluZGV4LCBldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7XG4gICAgICAgIGNhc2UgMTM6IC8vIGVudGVyXG4gICAgICAgIGNhc2UgMzI6IC8vIHNwYWNlXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRva2VuKGluZGV4KTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDg6IC8vIGJhY2tzcGFjZVxuICAgICAgICAgICAgdGhpcy5yZW1vdmUoaW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyVG9rZW5zKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ItdG9rZW5maWVsZC10b2tlbnMnIHJvbGU9J2xpc3Rib3gnPlxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnRva2Vucy5tYXAoKGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtgdG9rZW5fJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjeCgnYi10b2tlbmZpZWxkLXRva2VuJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiLXRva2VuZmllbGQtdG9rZW4tc2VsZWN0ZWQnOiB0aGlzLnByb3BzLnRva2Vuc1NlbGVjdGVkLmluZGV4T2YoaW5kZXgpICE9PSAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnNlbGVjdFRva2VuLmJpbmQodGhpcywgaW5kZXgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5oYW5kbGVUb2tlbktleURvd24uYmluZCh0aGlzLCBpbmRleCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT0nb3B0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PScwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5lbnRpdGllc1tpbmRleF0udGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJUb2tlbkNsb3NlKGluZGV4KX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFRva2VuaXplZElucHV0LmludGVybmFsS2V5cyl9XG4gICAgICAgICAgICAgICAgcmVmPSd3cmFwcGVyJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goJ2ItdG9rZW5maWVsZC13cmFwcGVyJywgdGhpcy5wcm9wcy5jbGFzc05hbWUpfVxuICAgICAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5oYW5kbGVLZXlEb3dufT5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJUb2tlbnMoKX1cblxuICAgICAgICAgICAgICAgIDxUeXBlYWhlYWRcbiAgICAgICAgICAgICAgICAgICAgey4uLmV4dHJhY3RDaGlsZFByb3BzKHRoaXMucHJvcHMsIFR5cGVhaGVhZC5kZWZhdWx0UHJvcHMpfVxuICAgICAgICAgICAgICAgICAgICByZWY9J3R5cGVhaGVhZCdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdiLXRva2VuZmllbGQnXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyT25TZWxlY3Rpb249e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0UHJvcHM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMucHJvcHMuaW5wdXRQcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlSW5wdXRDbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRm9jdXM6IHRoaXMuaGFuZGxlSW5wdXRGb2N1cyxcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgb25FbnRpdHlTZWxlY3RlZD17dGhpcy5hZGR9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9wYWNrYWdlcy9ib3VuZGxlc3MtdG9rZW5pemVkLWlucHV0L2luZGV4LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==